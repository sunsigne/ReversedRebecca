TIME -> 0 = GOTO -> NAME:JEAN, PLAYER_AVOIDER_TYPE:STOP
! -> START_LEVEL = GOTO -> MOVE:25-47, TA_INIT
! -> SCENARIO_EXIT = WAITFOR -> TIMER:45 ? PEE_ITSELF


//// UP DOWN ////

GOAL -> 25-47 = MEMORY -> PEEING_HIMSELF ? CONTINUE_PEEING / MOVE:25-45
GOAL -> 25-45 = MEMORY -> SARAH_ASKED_JEAN_ABOUT_KEYS ? FACING:UP, TA_NEAR_DOOR_CONDITIONNAL / PARSE_JEAN_STOP_UP_AND_DOWN
$ -> PARSE_JEAN_STOP_UP_AND_DOWN = MEMORY -> JEAN_STOP_UP_AND_DOWN ? MOVE:25-46 / GOING_UP_AND_DOWN
$ -> GOING_UP_AND_DOWN = FACING -> UP ? GO_BEFORE_DOOR / UP_DOWN
$ -> GO_BEFORE_DOOR = GOTO -> MOVE:25-44, PLAYER_AVOIDER_TYPE:AROUND
GOAL -> 25-44 = MEMORY -> SARAH_ASKING_JEAN_ABOUT_KEYS ? PARSE_SARAH_STOP_WAITING_FOR_ASKING_JEAN_ABOUT_KEYS / MOVE:25-45
$ -> PARSE_SARAH_STOP_WAITING_FOR_ASKING_JEAN_ABOUT_KEYS = MEMORY -> SARAH_STOP_WAITING_FOR_ASKING_JEAN_ABOUT_KEYS ? MOVE:25-45 / SARAH_AND_JEAN_TALKING
$ -> UP_DOWN = GOTO -> MOVE:25-47, PLAYER_AVOIDER_TYPE:STOP

$ -> TA_INIT = MEMORY -> SCENARIO_INQUIRY ? TA_INIT_INQUIRY / TA_INIT_EXIT
$ -> TA_INIT_INQUIRY = TRIPLE_ACTION -> TALK*JEAN_HAVE_YOU_DATA
TALKED -> JEAN_HAVE_YOU_DATA = GOTO -> MEMORY:JEAN_HAVE_YOU_DATA, TA_JEAN_HAVE_YOU_DATA_AGAIN
$ -> TA_JEAN_HAVE_YOU_DATA_AGAIN = TRIPLE_ACTION -> TALK*JEAN_HAVE_YOU_DATA_AGAIN
TALKED -> JEAN_HAVE_YOU_DATA_AGAIN = MEMORY -> JEAN_HAVE_YOU_DATA_AGAIN
$ -> TA_INIT_EXIT = TRIPLE_ACTION -> TALK*JEAN_FIRST_URGE
TALKED -> JEAN_FIRST_URGE = TRIPLE_ACTION -> TALK*JEAN_STOP_MOVING
TALKED -> JEAN_STOP_MOVING = GOTO -> MOVE:25-46, PLAYER_AVOIDER_TYPE:AROUND, MEMORY:JEAN_STOP_UP_AND_DOWN


//// STOP MOVING //// 

GOAL -> 25-46 = GOTO -> PARSE_PEEING_ITTSELF_TIMER 
$ -> PARSE_PEEING_ITTSELF_TIMER = MEMORY -> PEEING_ITTSELF_TIMER ? EXPRESSION:SUSPENSION, WAITFOR_CREATE_PUDDLE / FACING:RIGHT, TA_SECOND_URGE
$ -> TA_SECOND_URGE = TRIPLE_ACTION -> TALK*JEAN_SECOND_URGE
TALKED -> JEAN_SECOND_URGE = TRIPLE_ACTION -> TALK*JEAN_HOLDING
TALKED -> JEAN_HOLDING = GOTO -> ACTION_ONE:TALK*JEAN_HOLDING_AGAIN, DONT_HOLD_TALK_IF_PLAYER_TOO_FAR
TALKED -> JEAN_HOLDING_AGAIN = TRIPLE_ACTION -> TALK*JEAN_HOLDING_LAST
TALKED -> JEAN_HOLDING_LAST = GOTO -> TA_PEE_CORNER
$ -> DONT_HOLD_TALK_IF_PLAYER_TOO_FAR = WAITFOR -> PLAYER_FUTHER_THAN:3 ? TA_PEE_CORNER
$ -> TA_PEE_CORNER = TRIPLE_ACTION -> TALK*JEAN_PEE_CORNER


//// PEEING ITSELF //// 

$ -> PEE_ITSELF = MEMORY -> PEEING_HIMSELF ? NULL / MEMORY:PEEING_ITTSELF_TIMER, MOVE:25-46
TALKED -> JEAN_PEE_CORNER = GOTO -> CUTSCENE:START, MEMORY:PEEING_HIMSELF, WAITING_PEE_CORNER_CUTSCENE
$ -> WAITING_PEE_CORNER_CUTSCENE = WAITFOR -> TIMER:1 ? IS_ASHAMED
$ -> IS_ASHAMED = GOTO -> AVOID_LOOKING, EXPRESSION:SUSPENSION, WAITING_BEFORE_CONFESSING
$ -> AVOID_LOOKING = FACING -> DOWN ? FACING:LEFT / AVOID_LOOKING_VAR
$ -> AVOID_LOOKING_VAR = FACING -> UP ? FACING:LEFT / FACING:DOWN
$ -> WAITING_BEFORE_CONFESSING = WAITFOR -> TIMER:2 ? TALK:JEAN_PISSED_ITS_PANTS
TALKED -> JEAN_PISSED_ITS_PANTS = FACING -> DOWN ? CREATE_HORIZONTAL_PEE_PUDDLES / CREATE_VERTICAL_PEE_PUDDLES
$ -> WAITFOR_CREATE_PUDDLE = WAITFOR -> TIMER:2 ? MEMORY:PEEING_HIMSELF, TA_NULL, CREATE_VERTICAL_PEE_PUDDLES
$ -> TA_NULL = TRIPLE_ACTION -> NULL

$ -> CREATE_HORIZONTAL_PEE_PUDDLES = GOTO -> CREATE_FIRST_HORIZONTAL_PUDDLE, SLOW:26-46
GOAL -> 26-46 = GOTO -> CREATE_SECOND_HORIZONTAL_PUDDLE, SLOW:27-46
GOAL -> 27-46 = GOTO -> CREATE_THIRD_HORIZONTAL_PUDDLE, SLOW:27-47
GOAL -> 27-47 = GOTO -> CREATE_FOURTH_HORIZONTAL_PUDDLE, GOCRYROOM
$ -> CREATE_VERTICAL_PEE_PUDDLES = GOTO -> CREATE_FIRST_VERTICAL_PUDDLE, SLOW:25-47
$ -> CONTINUE_PEEING = GOTO -> CREATE_SECOND_VERTICAL_PUDDLE, SLOW:25-48
GOAL -> 25-48 = GOTO -> CREATE_THIRD_VERTICAL_PUDDLE, SLOW:26-48
GOAL -> 26-48 = GOTO -> PLAYER_AVOIDER_TYPE:AROUND, GOCRYROOM
$ -> CREATE_FIRST_HORIZONTAL_PUDDLE = CREATE_DECORATION -> ONTHESPOT-BACK:1,1,PUDDLE_04
$ -> CREATE_SECOND_HORIZONTAL_PUDDLE = CREATE_DECORATION -> ONTHESPOT-BACK:1,1,PUDDLE_05
$ -> CREATE_THIRD_HORIZONTAL_PUDDLE = CREATE_DECORATION -> ONTHESPOT-BACK:1,1,PUDDLE_06
$ -> CREATE_FOURTH_HORIZONTAL_PUDDLE = CREATE_DECORATION -> ONTHESPOT-BACK:1,1,PUDDLE_07
$ -> CREATE_FIRST_VERTICAL_PUDDLE = CREATE_DECORATION -> ONTHESPOT-BACK:1,1,PUDDLE_01
$ -> CREATE_SECOND_VERTICAL_PUDDLE = CREATE_DECORATION -> ONTHESPOT-BACK:1,1,PUDDLE_02
$ -> CREATE_THIRD_VERTICAL_PUDDLE = CREATE_DECORATION -> ONTHESPOT-BACK:1,1,PUDDLE_03

$ -> GOCRYROOM = GOTO -> SLOW:29-54, CREATE_PEE_PUDDLE_OBJECT, CUTSCENE:STOP 
$ -> CREATE_PEE_PUDDLE_OBJECT = GOTO -> PEE_PUDDLE_OBJECT_CREATION, AFFECTING:PEEPUDDLE_INIT
$ -> PEE_PUDDLE_OBJECT_CREATION = CREATE -> 25-46-BACK:12-255-255

//// CRY ROOM //// 

GOAL -> 29-54 = MEMORY -> PLAYER_HIDDEN_IN_CRYROOM ? PARSE_PLAYER_NOT_HIDDEN_IN_CRYROOM / FIRST_TIME_REACHED_CRY_DOOR
$ -> PARSE_PLAYER_NOT_HIDDEN_IN_CRYROOM = MEMORY -> PLAYER_NOT_HIDDEN_IN_CRYROOM ? FIRST_TIME_REACHED_CRY_DOOR / MEMORY:PLAYER_NOT_HIDDEN_IN_CRYROOM, UNLOCK_DOOR, SLOW:29-53
$ -> FIRST_TIME_REACHED_CRY_DOOR = SEE -> PLAYER ? TALK:JEAN_YOU_HERE / GOCRYING
$ -> WAITING_TO_CLOSE = WAITFOR -> PLAYER_FUTHER_THAN:6 ? SLOW:29-54
TALKED -> JEAN_YOU_HERE = GOTO -> DISABLE_PLANT, DISABLE_CHAIR, DISABLE_TRASH, PARSE_PLAYER_HIDDEN_IN_CRYROOM
$ -> PARSE_PLAYER_HIDDEN_IN_CRYROOM = MEMORY -> PLAYER_HIDDEN_IN_CRYROOM ? SLOW:29-54 / PARSE_YOU_HERE_AT_DOOR_UP
$ -> PARSE_YOU_HERE_AT_DOOR_UP = FACING -> UP ? SLOW:30-54 / PARSE_YOU_HERE_AT_DOOR_LEFT
$ -> PARSE_YOU_HERE_AT_DOOR_LEFT = FACING -> LEFT ? YOU_HERE_AT_DOOR / SLOW:29-53
$ -> YOU_HERE_AT_DOOR = GOTO -> WAITING_TO_CLOSE, ARE_YOU_OK
GOAL -> 29-53 = GOTO -> FACING:DOWN, WAITING_TO_CLOSE, ARE_YOU_OK
GOAL -> 30-54 = GOTO -> FACING:LEFT, WAITING_TO_CLOSE, ARE_YOU_OK
$ -> ARE_YOU_OK = TRIPLE_ACTION -> TALK*JEAN_ARE_YOU_OK
TALKED -> JEAN_ARE_YOU_OK = TRIPLE_ACTION -> TALK*JEAN_CLOTHES
TALKED -> JEAN_CLOTHES = TRIPLE_ACTION -> TALK*JEAN_LEAVE_ME_ALONE
TALKED -> JEAN_LEAVE_ME_ALONE = TRIPLE_ACTION -> TALK*JEAN_THINK
$ -> DISABLE_PLANT = DISABLE -> 29-55:1
$ -> DISABLE_CHAIR = DISABLE -> 31-53:1
$ -> DISABLE_TRASH = DISABLE -> 33-55:1

$ -> GOCRYING = GOTO -> CREATE_PURPLE_DOOR, DELETE_SECOND_DOOR, LOCKING_SOUND_CONDITIONNAL, SLOW:33-54, PLAYER_HIDDEN_CONDITIONNAL
$ -> UNLOCK_DOOR = GOTO -> CREATE_NULL_DOOR, DELETE_SECOND_DOOR, LOCKING_SOUND_CONDITIONNAL
$ -> CREATE_PURPLE_DOOR = CREATE -> 28-54-BACK:1-255-6
$ -> CREATE_NULL_DOOR = CREATE -> 28-54-BACK:1-255-0
$ -> DELETE_SECOND_DOOR = DELETE -> 28-54:2
$ -> LOCKING_SOUND_CONDITIONNAL = PLAYER_CLOSER_THAN -> 10 ? SOUND:DOOR_UNLOCK / NULL
$ -> PLAYER_HIDDEN_CONDITIONNAL = WAITFOR -> PLAYER_CLOSER_THAN:3 ? CHECK_IF_PLAYER_WITHIN_CRYROOM
$ -> CHECK_IF_PLAYER_WITHIN_CRYROOM = SEE -> PLAYER ? MEMORY:PLAYER_HIDDEN_IN_CRYROOM, TALK:JEAN_YOU_HERE / NULL
$ -> PLAYER_NOT_HIDDEN = WAITFOR -> NULL
GOAL -> 33-54 = GOTO -> PLAYER_NOT_HIDDEN, SLOW:33-52
GOAL -> 33-52 = CONDITION -> CRY


//// SARAH JEAN ////

$ -> SARAH_AND_JEAN_TALKING = GOTO -> MOVE:STOP, FACING:RIGHT, AFFECTING:TA_LISTEN_SARAH_JEAN_CONVERSATION, WAITFOR_SARAH_NEXT_DOOR
! -> TA_LISTEN_SARAH_JEAN_CONVERSATION = TRIPLE_ACTION -> LISTEN*LISTEN_SARAH_JEAN_CONVERSATION
$ -> LISTEN_SARAH_JEAN_CONVERSATION = TALK -> SARAH_JEAN_CONVERSATION
TALKED -> SARAH_JEAN_CONVERSATION = AFFECTING -> TA_NULL_LISTEN_SARAH_JEAN_CONVERSATION
! -> TA_NULL_LISTEN_SARAH_JEAN_CONVERSATION = TRIPLE_ACTION -> NULL
$ -> WAITFOR_SARAH_NEXT_DOOR = WAITFOR -> TIMER:4 ? MEMORY:SARAH_ASKED_JEAN_ABOUT_KEYS, STEP_ASIDE_FROM_DESK, AFFECTING:TA_NULL_LISTEN_SARAH_JEAN_CONVERSATION, AFFECTING:SARAH_WILL_ENTER_JEAN_ROOM
$ -> STEP_ASIDE_FROM_DESK = MOVE_BACKUP -> 25-42, 25-45
GOAL -> 25-42 = GOTO -> FACING:DOWN, TA_NEAR_DOOR_CONDITIONNAL
$ -> TA_NEAR_DOOR_CONDITIONNAL = MEMORY -> JEAN_HAVE_YOU_DATA ? PARSE_JEAN_HAVE_YOU_DATA_AGAIN / TA_JEAN_HAVE_YOU_DATA_NEAR_DOOR
$ -> PARSE_JEAN_HAVE_YOU_DATA_AGAIN = MEMORY -> JEAN_HAVE_YOU_DATA_AGAIN ? NULL / TA_JEAN_HAVE_YOU_DATA_AGAIN
$ -> TA_JEAN_HAVE_YOU_DATA_NEAR_DOOR = TRIPLE_ACTION -> TALK*JEAN_HAVE_YOU_DATA_NEAR_DOOR
TALKED -> JEAN_HAVE_YOU_DATA_NEAR_DOOR = TRIPLE_ACTION -> TALK*JEAN_HAVE_YOU_DATA_AGAIN


//// LEFT RIGHT ////

WONPUZZLE -> 34-31 = MEMORY -> PEEING_HIMSELF ? NULL / FIRST_PUSHING_CUTSCENE
$ -> FIRST_PUSHING_CUTSCENE = GOTO -> CUTSCENE:START, MOVE:STOP, WAIT_FOR_REALISATION
$ -> WAIT_FOR_REALISATION = WAITFOR -> TIMER:1 ? RUSH_RESTROOM
$ -> RUSH_RESTROOM = GOTO -> FAST:33-32, FACING:UP, EXPRESSION:EXCLAMATION, PLAYER_AVOIDER_TYPE:PUSH_RIGHT

GOAL -> 33-32 = FAST -> 34-25
GOAL -> 34-25 = GOTO -> FAST:31-19, CUTSCENE:STOP, PLAYER_AVOIDER_TYPE:STOP

GOAL -> 31-19 = MOVE -> 27-19
GOAL -> 27-19 = MOVE -> 31-19


//// STRAIGHT BATHROOM ////

! -> SARAH_OPENED_FIRST_CYAN_DOOR = GOTO -> TA_NULL, PARSE_SARAH_ASKED_JEAN_ABOUT_KEYS
$ -> PARSE_SARAH_ASKED_JEAN_ABOUT_KEYS = MEMORY -> SARAH_ASKED_JEAN_ABOUT_KEYS ? SARAH_DID_SIDE_STEPPED / SARAH_DID_NOT_SIDE_STEPPED
$ -> SARAH_DID_SIDE_STEPPED = WAITFOR -> TIMER:2 ? PLAYER_AVOIDER_TYPE:PUSH, FAST:26-39
$ -> SARAH_DID_NOT_SIDE_STEPPED = GOTO -> MOVE:STOP, EXPRESSION:EXCLAMATION, FACING:UP, WAITFOR_RUSH_THROUGH_SARAH_CYAN_DOOR
$ -> WAITFOR_RUSH_THROUGH_SARAH_CYAN_DOOR = WAITFOR -> TIMER:1 ? PLAYER_AVOIDER_TYPE:PUSH_RIGHT, FAST:26-44
GOAL -> 26-44 = GOTO -> FAST:26-43, MEMORY:JEAN_PUSHED_SARAH, AFFECTING:PUSH_SARAH_TO_RIGHT
GOAL -> 26-43 = FAST -> 26-39
GOAL -> 26-39 = FAST -> 19-39
GOAL -> 19-39 = GOTO -> FAST:21-24, PLAYER_AVOIDER_TYPE:AROUND, AFFECTING:JEAN_REACHED_MIDDLE_OF_CORRIDOR