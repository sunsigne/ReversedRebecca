TIME -> 0 = GOTO -> NAME:JOSEPH, FACING:RIGHT, PLAYER_AVOIDER_TYPE:AROUND_OMNISCIENT


//// STATE ////

$ -> SIT = GOTO -> AFFECTING:OBJ-36*BLOCKING_VERTICAL_COUCH_FALSE, FACING:RIGHT, SOUND_IF_CAMERA:JUMP, TP:9-31, CONDITION:SIT

//// PLAYERLESS BEHAVIOR ////

! -> START_LEVEL = WAITFOR -> TIMER:120 ? SLOW:10-31
GOAL -> 10-31 = GOTO -> SIT, TA_COUCH, AFFECTING:MARIE*MARIE_THINKING_ABOUT_COFFEE
! -> JOSEPH_FEELS_SLEEPY = WAITFOR -> TIMER:20 ? PARSE_IS_CRYING
$ -> PARSE_IS_CRYING = CONDITION -> CRY ? NULL / WAITFOR_PLAYER_FAR_ENOUGH
$ -> WAITFOR_PLAYER_FAR_ENOUGH = WAITFOR -> PLAYER_FUTHER_THAN:5 ? CONDITION:BED


//// BEFORE COUCH ////

! -> SCENARIO_EXIT = TRIPLE_ACTION -> TALK*JOSEPH_BLA_BLA
TALKED -> JOSEPH_BLA_BLA = GOTO -> MEMORY:REBECCA_MET_JOSEPH_BEFORE_COUCH, FACING:RIGHT, ACTION_ONE:TALK*JOSEPH_FORGOT
TALKED -> JOSEPH_FORGOT = GOTO -> FACING:RIGHT, WAITFOR_TRYING_TO_REMEMBER
$ -> WAITFOR_TRYING_TO_REMEMBER = WAITFOR -> TIMER:59 ? PARSE_SEE_PLAYER
$ -> PARSE_SEE_PLAYER = SEE -> PLAYER ? PARSE_CUTSCENE_RUNNING / MEMORY:JOSEPH_REMEMBERED_THEN_FORGET_AGAIN, SLOW:10-31
$ -> PARSE_CUTSCENE_RUNNING = CUTSCENE -> RUNNING ? PARSE_SEE_PLAYER / PARSE_CHOOSING
$ -> PARSE_CHOOSING = CHOOSING -> TRUE ? PARSE_SEE_PLAYER / JOSPEH_REMEMBER_QUESTION
$ -> JOSPEH_REMEMBER_QUESTION = GOTO -> CUTSCENE:START, EXPRESSION:EXCLAMATION, WAITFOR_HEADING_PLAYER
$ -> WAITFOR_HEADING_PLAYER = WAITFOR -> TIMER:1 ? SLOW:PLAYER, WAITFOR_REACHED_PLAYER
$ -> WAITFOR_REACHED_PLAYER = WAITFOR -> PLAYER_CLOSER_THAN:3 ? WAITFOR_TALKING_ABOUT_REMEMBER
$ -> WAITFOR_TALKING_ABOUT_REMEMBER = WAITFOR -> TIMER:1 ? FACING_PLAYER:JOSEPH, TALK:JOSEPH_REMEMBER
TALKED -> JOSEPH_REMEMBER = GOTO -> KEY_CONVERSATION
$ -> KEY_CONVERSATION = GOTO -> SOUND:LOOT_SPAWN, CREATE_GREEN_KEY, PARSE_KEY
$ -> PARSE_KEY = UNLOCKEDTOOL -> KEY:GREEN ? TALK:JOSEPH_PINKY_WRONG / PARSE_UNLOCKABLE_GREEN_KEY
$ -> PARSE_UNLOCKABLE_GREEN_KEY = UNLOCKEDTOOLMAXLEVEL -> KEY:GREEN ? TALK:JOSEPH_PINKY_RIGHT / TALK:JOSEPH_PINKY_WRONG
$ -> CREATE_GREEN_KEY = CREATE -> 12-31-FRONT:1-2-255
TALKED -> JOSEPH_PINKY_RIGHT = GOTO -> CUTSCENE:STOP, PARSE_IS_JOSEPH_ON_COUCH
TALKED -> JOSEPH_PINKY_WRONG = GOTO -> CUTSCENE:STOP, PARSE_IS_JOSEPH_ON_COUCH
$ -> PARSE_IS_JOSEPH_ON_COUCH = MEMORY -> JOSEPH_REMEMBERED_THEN_FORGET_AGAIN ? MEMORY:TA_JOSEPH_REFUSE, TA_COUCH / SLOW:10-31


//// DURING COUCH ////

$ -> TA_COUCH = TRIPLE_ACTION -> TALK_VAR*TALK_ON_COUCH_CONDITIONNAL
$ -> TALK_ON_COUCH_CONDITIONNAL = MEMORY -> REBECCA_MET_JOSEPH_BEFORE_COUCH ? PARSE_JOSEPH_REMEMBERED_THEN_FORGET_AGAIN / TALK:JOSEPH_HELLO
$ -> PARSE_JOSEPH_REMEMBERED_THEN_FORGET_AGAIN = MEMORY -> JOSEPH_REMEMBERED_THEN_FORGET_AGAIN ? PARSE_TA_JOSEPH_REFUSE / TALK:JOSEPH_REFUSE
$ -> PARSE_TA_JOSEPH_REFUSE = MEMORY -> TA_JOSEPH_REFUSE ? TALK:JOSEPH_REFUSE / TALK:JOSEPH_REMEMBERED_THEN_FORGET_AGAIN
TALKED -> JOSEPH_REMEMBERED_THEN_FORGET_AGAIN = GOTO -> KEY_CONVERSATION
TALKED -> JOSEPH_REFUSE = GOTO -> MEMORY:REBECCA_NOT_WILLING_TO_TALK_TO_JOSEPH, ACTION_ONE:OFFER_A_TEA*JOSEPH_OFFER_A_TEA
TALKED -> JOSEPH_HELLO = GOTO -> MEMORY:REBECCA_MET_JOSEPH_ON_COUCH, ACTION_ONE:TALK*JOSEPH_FORGOT_COUCH
TALKED -> JOSEPH_FORGOT_COUCH = GOTO -> MEMORY:TA_JOSEPH_REFUSE, ACTION_ONE:TALK*JOSEPH_REFUSE
$ -> JOSEPH_OFFER_A_TEA = GOTO -> MEMORY:JOSEPH_IS_LOST_CAUSE, TALK:JOSEPH_OFFER_A_TEA
TALKED -> JOSEPH_OFFER_A_TEA = CHOICE -> I_HAVE_TO_GO*JOSEPH_POLITELY_TAKE_LEAVE, SHUT_UP*JOSEPH_BLOW_HIM_OFF
! -> JOSEPH_POLITELY_TAKE_LEAVE = TALK -> JOSEPH_OFFER_A_TEA_GOOD
! -> JOSEPH_BLOW_HIM_OFF = TALK -> JOSEPH_OFFER_A_TEA_BAD
TALKED -> JOSEPH_OFFER_A_TEA_BAD = CONDITION -> CRY