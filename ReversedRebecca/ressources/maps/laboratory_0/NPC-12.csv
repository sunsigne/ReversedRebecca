TIME -> 0 = GOTO -> NAME:DELTA, FACING:UP, LARGE_STOP_HITBOX
! -> START_LEVEL = GOTO -> TA_INIT


//// STATE ////

$ -> NORMAL_HITBOX = HITBOX -> 0, 0, 16, 16
$ -> LARGE_HITBOX = HITBOX -> -32, -16, 64, 64
! -> DELTA_NORMAL_STATE = GOTO -> BLOCKING_PATH:TRUE, NORMAL_HITBOX
! -> DELTA_LARGE_DETECTION_STATE = GOTO -> LARGE_STOP_HITBOX
$ -> DELTA_LARGE_DETECTION_STATE = GOTO -> BLOCKING_PATH:FALSE, LARGE_HITBOX

! -> DELTA_TA_NULL = TRIPLE_ACTION -> NULL
! -> DELTA_WAITFOR_NULL = WAITFOR -> NULL
! -> DELTA_FACING_LEFT = FACING -> LEFT
! -> DELTA_FACING_DOWN = FACING -> DOWN

$ -> LARGE_STOP_HITBOX = GOTO -> PLAYER_AVOIDER_TYPE:STOP, DELTA_LARGE_DETECTION_STATE, DELTA_PLAYER_DISTANCE_CHECKER, CHECK_PLAYER_DISTANCE
$ -> CHECK_PLAYER_DISTANCE = WAITFOR -> PLAYER_FUTHER_THAN:3 ? FACING:UP, DELTA_LARGE_DETECTION_STATE, CHECK_PLAYER_DISTANCE
$ -> DELTA_PLAYER_DISTANCE_CHECKER = GOTO -> CREATE_DELTA_PLAYER_DISTANCE_CHECKER, AFFECTING:INIT_DELTA_PLAYER_DISTANCE_CHECKER, TP:32-43
$ -> CREATE_DELTA_PLAYER_DISTANCE_CHECKER = CREATE -> ONTHESPOT-BACK:16-255-255


//// EXIT CYAN ////

$ -> TA_INIT = TRIPLE_ACTION -> TALK_VAR*TALK_DELTA_KEY
$ -> TALK_DELTA_KEY = UNLOCKEDTOOL -> KEY:CYAN ? TALK:DELTA_KEY_EXIT / TALK:DELTA_KEY
TALKED -> DELTA_KEY_EXIT = GOTO -> TA_DELTA_THATS_CRAZY, MEMORY:DELTA_KEY_EXIT_DISCUSSION
TALKED -> DELTA_KEY = GOTO -> TA_DELTA_THATS_CRAZY
$ -> TA_DELTA_THATS_CRAZY = TRIPLE_ACTION -> TALK*DELTA_THATS_CRAZY
TALKED -> DELTA_THATS_CRAZY = CHOICE -> SOUNDS_FUN*DELTA_SOUNDS_FUN, THATS_NOT_COOL*DELTA_THATS_NOT_COOL
! -> DELTA_SOUNDS_FUN = TALK -> DELTA_SOUNDS_FUN
TALKED -> DELTA_SOUNDS_FUN = TRIPLE_ACTION -> TALK*DELTA_ADDICT
TALKED -> DELTA_ADDICT = TRIPLE_ACTION -> TALK*DELTA_FIRSTNAME
! -> DELTA_THATS_NOT_COOL = TALK -> DELTA_THATS_NOT_COOL
TALKED -> DELTA_THATS_NOT_COOL = TRIPLE_ACTION -> TALK*DELTA_PAST
TALKED -> DELTA_PAST = TRIPLE_ACTION -> TALK*DELTA_FIRSTNAME
TALKED -> DELTA_FIRSTNAME = TRIPLE_ACTION -> TALK_VAR*DELTA_WHERE_DO_I_FIND
$ -> DELTA_WHERE_DO_I_FIND = MEMORY -> DELTA_KEY_EXIT_DISCUSSION ? TALK:DELTA_WHERE_DO_I_FIND_KEY / TALK:DELTA_WHERE_DO_I_FIND_EXIT


//// INQUIRY ////

! -> ALICIA_MAYBE_HURTED = TRIPLE_ACTION -> ALICIA*TALK_DELTA_WHERE_IS_ALICIA
$ -> TALK_DELTA_WHERE_IS_ALICIA = GOTO -> CUTSCENE:START, WAITFOR_TALK_DELTA_WHERE_IS_ALICIA
$ -> WAITFOR_TALK_DELTA_WHERE_IS_ALICIA = WAITFOR -> TIMER:1 ? TALK:DELTA_WHERE_IS_ALICIA
TALKED -> DELTA_WHERE_IS_ALICIA = GOTO -> PLAYER_AVOIDER_TYPE:TRHOUGH


//// MIKA DELTA ////

! -> MIKA_DELTA_SEARCHING_ALICIA = GOTO -> SLOW:32-44, PLAYER_AVOIDER_TYPE:AROUND
GOAL -> 32-44 = SLOW -> 31-44
GOAL -> 31-44 = GOTO -> SLOW:28-44, AFFECTING:MIKA_START_FOLLOWING_DELTA
GOAL -> 28-44 = GOTO -> SLOW:29-39, PLAYER_AVOIDER_TYPE:STOP
GOAL -> 29-39 = MEMORY -> MIKA_DELTA_SEARCHING_ALICIA ? WAITFOR_SIDESTEP_ALICIA_ROOM_WITH_MIKA / NULL
$ -> WAITFOR_SIDESTEP_ALICIA_ROOM_WITH_MIKA = WAITFOR -> TIMER:1 ? SLOW:29-38, PLAYER_NOT_VERIFIED
GOAL -> 29-38 = GOTO -> MOVE:STOP, FACING:DOWN