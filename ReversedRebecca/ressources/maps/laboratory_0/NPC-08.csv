TIME -> 0 = GOTO -> NAME:SARAH, BLOCKING_PATH:FALSE


//// STATE ////

$ -> TA_NULL = TRIPLE_ACTION -> NULL
$ -> WAITFOR_NULL = WAITFOR -> NULL
! -> PUSH_SARAH_TO_RIGHT = GOTO -> FACING:LEFT, PUSH:RIGHT
$ -> SIT_ON_JEAN_CHAIR = GOTO -> CREATE_JEAN_CHAIR_AT_CAMILLE_DESK, SOUND_IF_CAMERA:JUMP, CONDITION:SIT, FACING:LEFT, TP:32-43, DISPLAY_SIT
$ -> DISPLAY_NORMAL = DISPLAY -> 0, 0
$ -> DISPLAY_SIT = DISPLAY -> 1, -2


//// VLADIMIR CUTSCENE ////

! -> VLADIMIR_ARRIVAL = GOTO -> TP:20-55, FACING:RIGHT, EXPRESSION:EXCLAMATION
TALKED -> MIKA_DAMN_IT = WAITFOR -> TIMER:1 ? SLOW:22-55, BLOCKING_PATH:TRUE
GOAL -> 22-55 = SLOW -> 25-55

! -> CHOOSING_FIND_AN_EXIT = TALK -> SARAH_SCENARIO_EXIT
TALKED -> SARAH_SCENARIO_EXIT = GOTO -> MEMORY:SCENARIO_EXIT, AFFECTING:SCENARIO_EXIT, AFFECTING:START_LEVEL
! -> CHOOSING_INVASTIGATE_THE_INTRUDER = TALK -> SARAH_SCENARIO_INQUIRY
TALKED -> SARAH_SCENARIO_INQUIRY = GOTO -> MEMORY:SCENARIO_INQUIRY, AFFECTING:SCENARIO_INQUIRY, AFFECTING:START_LEVEL
! -> START_LEVEL = GOTO -> PLAYER_AVOIDER_TYPE:AROUND, CUTSCENE:STOP


//// EXIT DOWN DESKS ////

! -> SCENARIO_EXIT = WAITFOR -> TIMER:3 ? SLOW:25-56
GOAL -> 25-56 = AFFECTING -> SARAH_MIKA_CONVERSATION
! -> SARAH_MIKA_CONVERSATION = GOTO -> FACING:RIGHT, ACTION_ONE:LISTEN*LISTEN_SARAH_MIKA_CONVERSATION, WAITFOR_GOING_TO_DELTA_DESK
$ -> LISTEN_SARAH_MIKA_CONVERSATION = TALK -> SARAH_MIKA_CONVERSATION
TALKED -> SARAH_MIKA_CONVERSATION = GOTO -> ACTION_ONE:NULL
$ -> WAITFOR_GOING_TO_DELTA_DESK = WAITFOR -> TIMER:10 ? ACTION_ONE:NULL, AFFECTING:MIKA*MIKA_FACING_DOWN_WITH_DELAY, SLOW:32-44
$ -> TA_LISTEN_SARAH_DELTA_EXIT_CONVERSATION = TRIPLE_ACTION -> LISTEN*LISTEN_SARAH_DELTA_EXIT_CONVERSATION
$ -> LISTEN_SARAH_DELTA_EXIT_CONVERSATION = TALK -> SARAH_DELTA_EXIT_CONVERSATION
$ -> WAITFOR_WILL_EXIT_DELTA_EXIT_ROOM = WAITFOR -> TIMER:40 ? TA_NULL, ENABLE_DELTA_AFTER_ASKING_KEY, PLAYER_AVOIDER_TYPE:CUTSCENE, SLOW:21-44, AFFECTING:DELTA*DELTA_LARGE_DETECTION_STATE
$ -> TAKE_JEAN_SHARE = GOTO -> SOUND_IF_CAMERA:JUMP, DELETE_JEAN_CHAIR, MEMORY:SARAH_TOOK_JEANS_CHAIR, DELETE_JEAN_CHAIR_PIRANHA, WAITFOR_HEADING_DELTA_ROOM_WITH_CHAIR
$ -> DELETE_JEAN_CHAIR = DELETE -> 21-42:WORLD,1
$ -> DELETE_JEAN_CHAIR_PIRANHA = DELETE -> 21-43:WORLD,1
$ -> WAITFOR_HEADING_DELTA_ROOM_WITH_CHAIR = WAITFOR -> TIMER:1 ? MEMORY:JEAN_CHAIR_TAKEN, SLOW:32-44 
$ -> WAITFOR_DELTA_WILL_SIT = WAITFOR -> TIMER:1 ? AFFECTING:DELTA*DELTA_SIT, WAITFOR_SARAH_WILL_SIT
$ -> WAITFOR_SARAH_WILL_SIT = WAITFOR -> TIMER:1 ? SIT_ON_JEAN_CHAIR, TA_LISTEN_SARAH_DELTA_GAMMA_CONVERSATION, AFFECTING:DELTA*TA_LISTEN_SARAH_DELTA_GAMMA_CONVERSATION, ENABLE_DELTA_GAMMA_CONVERSATION
$ -> ENABLE_DELTA_GAMMA_CONVERSATION = ENABLE -> 31-43:2
$ -> CREATE_JEAN_CHAIR_AT_CAMILLE_DESK = CREATE_DECORATION -> 32-42-BACK:WORLD,1,2,CHAIR_LEFT_10
$ -> PARSE_JEAN_PUSHED_PLAYER_IN_FRONT_OF_SARAH = MEMORY -> JEAN_PUSHED_PLAYER_IN_FRONT_OF_SARAH ? TALK:SARAH_ANGRY_AGAINST_JEAN / NULL
$ -> TA_LISTEN_SARAH_DELTA_GAMMA_CONVERSATION = TRIPLE_ACTION -> LISTEN*LISTEN_SARAH_DELTA_GAMMA_CONVERSATION
$ -> LISTEN_SARAH_DELTA_GAMMA_CONVERSATION = TALK -> SARAH_DELTA_GAMMA_CONVERSATION
TALKED -> SARAH_DELTA_GAMMA_CONVERSATION = TRIPLE_ACTION -> LISTEN*LISTEN_SARAH_DELTA_GAMMA_CONVERSATION_NEXT
$ -> LISTEN_SARAH_DELTA_GAMMA_CONVERSATION_NEXT = TALK -> SARAH_DELTA_GAMMA_CONVERSATION_NEXT
TALKED -> SARAH_DELTA_GAMMA_CONVERSATION_NEXT = TRIPLE_ACTION -> NULL


//// EXIT ALICIA DESKS ////

$ -> GO_SEARCH_ALICIA_DESK = GOTO -> PLAYER_AVOIDER_TYPE:STOP, SLOW:29-39
GOAL -> 29-39 = WAITFOR -> TIMER:1 ? PLAYER_AVOIDER_TYPE:CUTSCENE, EXPRESSION:SUSPENSION, WAITFOR_START_SEARCH_ALICIA_DESK
$ -> WAITFOR_START_SEARCH_ALICIA_DESK = WAITFOR -> TIMER:3 ? TA_SEARCHING_ALICIA_DESK, PARSE_SEE_PLAYER_WHILE_SEARCHING_ALICIA_DESK
$ -> WAITFOR_SEARCH_ALICIA_DESK = WAITFOR -> TIMER:7 ? PARSE_SEE_PLAYER_WHILE_SEARCHING_ALICIA_DESK
$ -> PARSE_SEE_PLAYER_WHILE_SEARCHING_ALICIA_DESK = SEE -> PLAYER ? FACING:PLAYER, WAITFOR_PARSE_SEE_PLAYER_WHILE_SEARCHING_ALICIA_DESK / SEARCH_ALICIA_DESK
$ -> WAITFOR_PARSE_SEE_PLAYER_WHILE_SEARCHING_ALICIA_DESK = WAITFOR -> TIMER:1 ? PARSE_SEE_PLAYER_WHILE_SEARCHING_ALICIA_DESK
$ -> SEARCH_ALICIA_DESK = RANDOM -> PERCENTAGE:50 ? SEARCH_ALICIA_DESK_ABCD / SEARCH_ALICIA_DESK_EFGH
$ -> SEARCH_ALICIA_DESK_ABCD = RANDOM -> PERCENTAGE:50 ? SEARCH_ALICIA_DESK_AB / SEARCH_ALICIA_DESK_CD
$ -> SEARCH_ALICIA_DESK_AB = RANDOM -> PERCENTAGE:50 ? SLOW:31-37 / SLOW:32-37
$ -> SEARCH_ALICIA_DESK_CD = RANDOM -> PERCENTAGE:50 ? SLOW:33-38 / SLOW:32-39
$ -> SEARCH_ALICIA_DESK_EFGH = RANDOM -> PERCENTAGE:50 ? SEARCH_ALICIA_DESK_EF / SEARCH_ALICIA_DESK_GH
$ -> SEARCH_ALICIA_DESK_EF = RANDOM -> PERCENTAGE:50 ? SLOW:31-39 / SLOW:31-38
$ -> SEARCH_ALICIA_DESK_GH = RANDOM -> PERCENTAGE:50 ? SLOW:30-39 / SLOW:30-37

GOAL -> 31-37 = GOTO -> SEARCH_ALICIA_RUBBLE, FACING:UP, WAITFOR_SEARCH_ALICIA_DESK
GOAL -> 32-37 = GOTO -> SEARCH_ALICIA_CHAIR, FACING:RIGHT, WAITFOR_SEARCH_ALICIA_DESK
GOAL -> 33-38 = GOTO -> SEARCH_ALICIA_COMPUTER, FACING:DOWN, WAITFOR_SEARCH_ALICIA_DESK
GOAL -> 32-39 = GOTO -> SEARCH_ALICIA_COMPUTER, FACING:RIGHT, WAITFOR_SEARCH_ALICIA_DESK
GOAL -> 31-39 = GOTO -> SEARCH_ALICIA_DESKTOP, FACING:DOWN, WAITFOR_SEARCH_ALICIA_DESK
GOAL -> 31-38 = GOTO -> SEARCH_ALICIA_PAPERWORK, FACING:LEFT, WAITFOR_SEARCH_ALICIA_DESK
GOAL -> 30-39 = GOTO -> SEARCH_ALICIA_PAPERWORK, FACING:UP, WAITFOR_SEARCH_ALICIA_DESK
GOAL -> 30-37 = GOTO -> SEARCH_ALICIA_PAPERWORK, FACING:DOWN, WAITFOR_SEARCH_ALICIA_DESK

$ -> TA_SEARCHING_ALICIA_DESK = TRIPLE_ACTION -> TALK_VAR*TALK_SARAH_SEARCH_ALICIA_DESK
$ -> TALK_SARAH_SEARCH_ALICIA_DESK = MEMORY -> ALICIA_FOLLOW_PLAYER ? PARSE_ALICIA_ALREADY_REACT_TO_SARAH_SEARCHING_DESK / TALK:SARAH_SEARCH_ALICIA_DESK
$ -> PARSE_ALICIA_ALREADY_REACT_TO_SARAH_SEARCHING_DESK = MEMORY -> ALICIA_ALREADY_REACT_TO_SARAH_SEARCHING_DESK ? TALK:SARAH_SEARCH_ALICIA_DESK / AFFECTING:ALICIA*TP_TO_PLAYER, TALK:SARAH_SEARCH_ALICIA_DESK
TALKED -> SARAH_SEARCH_ALICIA_DESK = TRIPLE_ACTION -> TALK_VAR*TALK_SARAH_SEARCH_ALICIA_DESK_NEXT
$ -> TALK_SARAH_SEARCH_ALICIA_DESK_NEXT = MEMORY -> ALICIA_FOLLOW_PLAYER ? PARSE_ALICIA_ALREADY_REACT_TO_SARAH_SEARCHING_DESK_NEXT / TALK:SARAH_SEARCH_ALICIA_DESK_NEXT
$ -> PARSE_ALICIA_ALREADY_REACT_TO_SARAH_SEARCHING_DESK_NEXT = MEMORY -> ALICIA_ALREADY_REACT_TO_SARAH_SEARCHING_DESK ? TALK:SARAH_SEARCH_ALICIA_DESK_NEXT / AFFECTING:ALICIA*TP_TO_PLAYER, TALK:SARAH_SEARCH_ALICIA_DESK_NEXT
TALKED -> SARAH_SEARCH_ALICIA_DESK_NEXT = TRIPLE_ACTION -> TALK_VAR*TALK_SARAH_SEARCH_ALICIA_DESK_NEXT_NEXT
$ -> TALK_SARAH_SEARCH_ALICIA_DESK_NEXT_NEXT = MEMORY -> ALICIA_FOLLOW_PLAYER ? PARSE_ALICIA_ALREADY_REACT_TO_SARAH_SEARCHING_DESK_NEXT_NEXT / TALK:SARAH_SEARCH_ALICIA_DESK_NEXT_NEXT
$ -> PARSE_ALICIA_ALREADY_REACT_TO_SARAH_SEARCHING_DESK_NEXT_NEXT = MEMORY -> ALICIA_ALREADY_REACT_TO_SARAH_SEARCHING_DESK ? TALK:SARAH_SEARCH_ALICIA_DESK_NEXT_NEXT / AFFECTING:ALICIA*TP_TO_PLAYER, TALK:SARAH_SEARCH_ALICIA_DESK_NEXT_NEXT


//// INQUIRY DOWN DESKS ////

! -> SCENARIO_INQUIRY = WAITFOR -> TIMER:2 ? SLOW:26-44
GOAL -> 26-44 = MEMORY -> SARAH_HAS_CYAN_KEY ? FACING:UP, BLOCKING_SIGHT:FALSE, PARSE_SARAH_WILL_NOTICE_DOOR_IS_OPENED / BLOCKING_SIGHT:FALSE, WAITFOR_PARSE_JEAN_STUNNED
$ -> PARSE_SARAH_WILL_NOTICE_DOOR_IS_OPENED = MEMORY -> SARAH_WILL_NOTICE_DOOR_IS_OPENED ? PLAYER_AVOIDER_TYPE:AROUND, EXPRESSION:SUSPENSION, WAITFOR_START_SEARCHING_PLAYER_WHICH_OPENED_DOOR / SLOW:26-42
$ -> PARSE_SARAH_SEE_PLAYER_WHICH_OPENED_DOOR = SEE -> PLAYER ? SARAH_SEE_PLAYER_WHICH_OPENED_DOOR_SECOND_VERIFICATION / NULL
$ -> WAITFOR_START_SEARCHING_PLAYER_WHICH_OPENED_DOOR = WAITFOR -> TIMER:1 ? WAITFOR_FACING_LEFT_OPENED_CYAN_DOOR, PARSE_SARAH_SEE_PLAYER_WHICH_OPENED_DOOR
$ -> SARAH_SEE_PLAYER_WHICH_OPENED_DOOR_SECOND_VERIFICATION = PLAYER_CLOSER_THAN -> 6 ? CUTSCENE:START, EXPRESSION:EXCLAMATION, FACING:REBECCA, MOVE:STOP, WAITING_TALK_SARAH_OPENED_CYAN_DOOR / NULL
$ -> WAITFOR_FACING_LEFT_OPENED_CYAN_DOOR = WAITFOR -> TIMER:1 ? FACING:LEFT, WAITFOR_FACING_RIGHT_OPENED_CYAN_DOOR, PARSE_SARAH_SEE_PLAYER_WHICH_OPENED_DOOR
$ -> WAITFOR_FACING_RIGHT_OPENED_CYAN_DOOR = WAITFOR -> TIMER:1 ? FACING:RIGHT, WAITFOR_FACING_DOWN_OPENED_CYAN_DOOR, PARSE_SARAH_SEE_PLAYER_WHICH_OPENED_DOOR
$ -> WAITFOR_FACING_DOWN_OPENED_CYAN_DOOR = WAITFOR -> TIMER:1 ? FACING:DOWN, WAITFOR_FACING_UP_OPENED_CYAN_DOOR, PARSE_SARAH_SEE_PLAYER_WHICH_OPENED_DOOR
$ -> WAITFOR_FACING_UP_OPENED_CYAN_DOOR = WAITFOR -> TIMER:1 ? FACING:UP, WAITFOR_SUSPENSION_OPENED_CYAN_DOOR, PARSE_SARAH_SEE_PLAYER_WHICH_OPENED_DOOR
$ -> WAITFOR_SUSPENSION_OPENED_CYAN_DOOR = WAITFOR -> TIMER:1 ? EXPRESSION:SUSPENSION, WAITFOR_HEADING_CYAN_DOOR, PARSE_SARAH_SEE_PLAYER_WHICH_OPENED_DOOR
$ -> WAITFOR_HEADING_CYAN_DOOR = WAITFOR -> TIMER:2 ? PLAYER_AVOIDER_TYPE:STOP, SLOW:26-39, PARSE_SARAH_SEE_PLAYER_WHICH_OPENED_DOOR
$ -> WAITING_TALK_SARAH_OPENED_CYAN_DOOR = WAITFOR -> TIMER:1 ? TALK:SARAH_OPENED_CYAN_DOOR
TALKED -> SARAH_OPENED_CYAN_DOOR = GOTO -> CUTSCENE:STOP, PLAYER_AVOIDER_TYPE:STOP, SLOW:26-39
$ -> WAITFOR_PARSE_JEAN_STUNNED = WAITFOR -> TIMER:2 ? PLAYER_AVOIDER_TYPE:CUTSCENE, PARSE_JEAN_STUNNED 
$ -> PARSE_JEAN_STUNNED = STUNNED -> JEAN ? PLAYER_AVOIDER_TYPE:STOP, SLOW:29-44 / FACING:LEFT, MEMORY:SARAH_ASKING_JEAN_ABOUT_KEYS, WAITFOR_SARAH_STOP_WAITING_FOR_ASKING_JEAN_ABOUT_KEYS
$ -> WAITFOR_SARAH_STOP_WAITING_FOR_ASKING_JEAN_ABOUT_KEYS = WAITFOR -> TIMER:3 ? MEMORY:SARAH_STOP_WAITING_FOR_ASKING_JEAN_ABOUT_KEYS, PLAYER_AVOIDER_TYPE:STOP, SLOW:29-44
GOAL -> 29-44 = GOTO -> MEMORY:SARAH_CANT_KNOW_CYAN_DOOR_IS_OPENED, SLOW:31-44
! -> SARAH_WILL_ENTER_JEAN_ROOM = GOTO -> ACTION_ONE:NULL, WAITFOR_SARAH_WILL_ENTER_JEAN_ROOM
$ -> WAITFOR_SARAH_WILL_ENTER_JEAN_ROOM = WAITFOR -> TIMER:1 ? ACTION_ONE:NULL, PLAYER_AVOIDER_TYPE:FORCE, SLOW:24-44
GOAL -> 24-44 = GOTO -> PLAYER_AVOIDER_TYPE:STOP, BLOCKING_SIGHT:TRUE, CREATE_DESK_KEY_ROOM_PATH_CHECKER, AFFECTING:OBJ-14*INIT_DESK_KEY_ROOM_PATH_CHECKER, PARSE_SARAH_SEE_PLAYER_WHILE_SEARCHING_CYAN_KEY
$ -> CREATE_DESK_KEY_ROOM_PATH_CHECKER = CREATE -> 17-44-BACK:14-255-255
$ -> PARSE_SARAH_SEE_PLAYER_WHILE_SEARCHING_CYAN_KEY = MEMORY -> SARAH_SEE_PLAYER_WHILE_SEARCHING_CYAN_KEY ? AFFECTING:SARAH_CYAN_KEY_DESK_CUTSCENE / SLOW:23-44
GOAL -> 23-44 = GOTO -> MEMORY:SARAH_CANT_KNOW_CYAN_DOOR_IS_OPENED, SLOW:21-44
GOAL -> 21-44 = GOTO -> FACING:UP, WAITING_BEFORE_JEAN_ROOM_PARSE_SCENARIO
$ -> WAITING_BEFORE_JEAN_ROOM_PARSE_SCENARIO = WAITFOR -> TIMER:2 ? JEAN_ROOM_PARSE_SCENARIO
$ -> JEAN_ROOM_PARSE_SCENARIO = MEMORY -> SCENARIO_EXIT ? TAKE_JEAN_SHARE / HEADING_COMPUTER
$ -> HEADING_COMPUTER = GOTO -> FACING:LEFT, CREATE_DESK_KEY_ROOM_PATH_CHECKER, AFFECTING:OBJ-14*INIT_DESK_KEY_ROOM_PATH_COMPUTER_CHECKER
! -> SARAH_WILL_GO_TO_COMPUTER_TO_TAKE_CYAN_KEY = GOTO -> FACING:DOWN, SLOW:20-42
GOAL -> 20-42 = GOTO -> FACING:RIGHT, WAITFOR_WILL_EXIT_JEAN_ROOM 
$ -> WAITFOR_WILL_EXIT_JEAN_ROOM = WAITFOR -> TIMER:3 ? MEMORY:SARAH_HAS_CYAN_KEY, SLOW:26-44

! -> A1_LISTEN_SARAH_JEAN_CONVERSATION = GOTO -> WAITFOR_NULL, A1_LISTEN_SARAH_JEAN_CONVERSATION
$ -> A1_LISTEN_SARAH_JEAN_CONVERSATION = ACTION_ONE -> LISTEN*LISTEN_SARAH_JEAN_CONVERSATION
$ -> LISTEN_SARAH_JEAN_CONVERSATION = TALK -> SARAH_JEAN_CONVERSATION
TALKED -> SARAH_JEAN_CONVERSATION = ACTION_ONE -> NULL

GOAL -> 31-44 = GOTO -> PLAYER_AVOIDER_TYPE:FORCE, SLOW:32-44
GOAL -> 32-44 = GOTO -> FACING:UP, DISABLE_DELTA_WILL_ASKING_KEYS, DELTA_NOTICE_SARAH_PRESENCE, PARSE_DELTA_SCENARIO
$ -> PARSE_DELTA_SCENARIO = MEMORY -> SCENARIO_EXIT ? PARSE_JEAN_CHAIR_TAKEN / WAITFOR_WILL_EXIT_DELTA_KEY_ROOM, TA_LISTEN_SARAH_DELTA_KEY_CONVERSATION
$ -> PARSE_JEAN_CHAIR_TAKEN = MEMORY -> JEAN_CHAIR_TAKEN ? WAITFOR_DELTA_WILL_SIT / WAITFOR_WILL_EXIT_DELTA_EXIT_ROOM, TA_LISTEN_SARAH_DELTA_EXIT_CONVERSATION
$ -> DELTA_NOTICE_SARAH_PRESENCE = GOTO -> AFFECTING:DELTA*DELTA_NORMAL_STATE, AFFECTING:DELTA*DELTA_WAITFOR_NULL, AFFECTING:DELTA*DELTA_FACING_DOWN
$ -> TA_LISTEN_SARAH_DELTA_KEY_CONVERSATION = TRIPLE_ACTION -> LISTEN*LISTEN_SARAH_DELTA_KEY_CONVERSATION
$ -> LISTEN_SARAH_DELTA_KEY_CONVERSATION = TALK -> SARAH_DELTA_KEY_CONVERSATION
$ -> WAITFOR_WILL_EXIT_DELTA_KEY_ROOM = WAITFOR -> TIMER:4 ? TA_NULL, ENABLE_DELTA_AFTER_ASKING_KEY, PLAYER_AVOIDER_TYPE:CUTSCENE, MEMORY:SARAH_HAS_CYAN_KEY, SLOW:26-44, AFFECTING:DELTA_LARGE_DETECTION_STATE
$ -> DISABLE_DELTA_WILL_ASKING_KEYS = DISABLE -> 32-43:2
$ -> ENABLE_DELTA_AFTER_ASKING_KEY = ENABLE -> 32-43:2
GOAL -> 26-42 = GOTO -> PLAYER_AVOIDER_TYPE:AROUND, FACING:UP, WAITFOR_OPENING_FIRST_CYAN_DOOR

! -> ALICIA_MAYBE_HURTED = MEMORY -> ALICIA_ENCOUNTERED ? NULL / PARSE_ALICIA_MAYBE_HURTED_SARAH_ASKED
$ -> PARSE_ALICIA_MAYBE_HURTED_SARAH_ASKED = MEMORY -> ALICIA_MAYBE_HURTED_SARAH_ASKED ? ACTION_THREE:NULL / A3_ALICIA
$ -> A3_ALICIA = ACTION_THREE -> ALICIA*TALK_SARAH_WHERE_IS_ALICIA
$ -> TALK_SARAH_WHERE_IS_ALICIA = TALK -> SARAH_WHERE_IS_ALICIA
TALKED -> SARAH_WHERE_IS_ALICIA = GOTO -> MEMORY:ALICIA_MAYBE_HURTED_SARAH_ASKED, PARSE_SARAH_ACTIVELY_ASKING_JEAN_ABOUT_KEYS
$ -> PARSE_SARAH_ACTIVELY_ASKING_JEAN_ABOUT_KEYS = MEMORY -> SARAH_ACTIVELY_ASKING_JEAN_ABOUT_KEYS ? PARSE_SARAH_ASKED_JEAN_ABOUT_KEYS_ALICIA / NULL
$ -> PARSE_SARAH_ASKED_JEAN_ABOUT_KEYS_ALICIA = MEMORY -> SARAH_ASKED_JEAN_ABOUT_KEYS ? NULL / PARSE_ALICIA_MAYBE_HURTED_JEAN_ASKED
$ -> PARSE_ALICIA_MAYBE_HURTED_JEAN_ASKED = MEMORY -> ALICIA_MAYBE_HURTED_JEAN_ASKED ? NULL / TALK:JEAN_WHERE_IS_ALICIA_VAR
TALKED -> SARAH_WHERE_IS_ALICIA_VAR = GOTO -> MEMORY:ALICIA_MAYBE_HURTED_SARAH_ASKED, ACTION_THREE:NULL
! -> THEFT = ACTION_TWO -> THEFT*TALK_SARAH_THEFT
$ -> TALK_SARAH_THEFT = TALK -> SARAH_THEFT

! -> SARAH_CYAN_KEY_DESK_CUTSCENE = GOTO -> CUTSCENE:START, EXPRESSION:EXCLAMATION, WAIFTOR_ASKING_REBECCAS_HELP_TO_FIND_KEYS
$ -> WAIFTOR_ASKING_REBECCAS_HELP_TO_FIND_KEYS = WAITFOR -> TIMER:2 ? PARSE_ALICIA_MAYBE_HURTED
$ -> PARSE_ALICIA_MAYBE_HURTED = MEMORY -> ALICIA_MAYBE_HURTED ? PARSE_ALICIA_MAYBE_HURTED_SARAH_ASKED_KEYS / TALK:SARAH_REBECCA_HELP_FOR_KEYS
$ -> PARSE_ALICIA_MAYBE_HURTED_SARAH_ASKED_KEYS = MEMORY -> ALICIA_MAYBE_HURTED_SARAH_ASKED ? TALK:SARAH_REBECCA_HELP_FOR_KEYS / TALK:SARAH_REBECCA_HELP_FOR_KEYS_ALICIA
TALKED -> SARAH_REBECCA_NO_KEYS = GOTO -> PLAYER_AVOIDER_TYPE:STOP, SLOW:31-44
TALKED -> SARAH_REBECCA_GIVING_KEYS = SLOW -> 26-42
TALKED -> SARAH_REBECCA_HELP_FOR_KEYS_ALICIA = GOTO -> MEMORY:ALICIA_MAYBE_HURTED_SARAH_ASKED, ACTION_THREE:NULL


//// INQUIRY FIRST CYAN DOOR ////

$ -> WAITFOR_OPENING_FIRST_CYAN_DOOR = WAITFOR -> TIMER:4 ? OPENING_FIRST_CYAN_DOOR, WAITFOR_SIDE_STEP_FROM_FIRST_CYAN_DOOR_CONDITIONNAL
$ -> OPENING_FIRST_CYAN_DOOR = GOTO -> SOUND:DOOR_UNLOCK, CREATE_FIRST_NULL_DOOR, DELETE_FIRST_CYAN_DOOR, UNLOCK_FIRST_CYAN_DOOR_ANIMATION, AFFECTING:SARAH_OPENED_FIRST_CYAN_DOOR, MEMORY:SARAH_UNLOCKED_FIRST_CYAN_DOOR
$ -> CREATE_FIRST_NULL_DOOR = CREATE -> 26-41-FRONT:1-235-0
$ -> DELETE_FIRST_CYAN_DOOR = DELETE -> 26-41:WORLD,1
$ -> UNLOCK_FIRST_CYAN_DOOR_ANIMATION = CREATE -> 26-41-FRONT:1-128-1
$ -> WAITFOR_SIDE_STEP_FROM_FIRST_CYAN_DOOR_CONDITIONNAL = MEMORY -> SARAH_ASKED_JEAN_ABOUT_KEYS ? WAITFOR_SIDE_STEP_FROM_FIRST_CYAN_DOOR / NULL
$ -> WAITFOR_SIDE_STEP_FROM_FIRST_CYAN_DOOR = WAITFOR -> TIMER:1 ? SIDE_STEP_FROM_FIRST_CYAN_DOOR
$ -> SIDE_STEP_FROM_FIRST_CYAN_DOOR = MEMORY -> JEAN_WAITING_FUTHER_SARAH_TO_OPEN ? BACKUP_FIRST_CYAN_DOOR_B / BACKUP_FIRST_CYAN_DOOR_A
$ -> BACKUP_FIRST_CYAN_DOOR_A = SLOW_BACKUP -> 27-42, 26-43
$ -> BACKUP_FIRST_CYAN_DOOR_B = SLOW_BACKUP -> 27-42, 25-42
GOAL -> 27-42 = GOTO -> FACING:LEFT, MEMORY:JEAN_PUSH_DOWN
GOAL -> 26-43 = FACING -> UP
GOAL -> 25-42 = GOTO -> FACING:RIGHT, MEMORY:JEAN_PUSH_RIGHT
! -> JEAN_REACHED_MIDDLE_OF_CORRIDOR = MEMORY -> SCENARIO_INQUIRY ? MEMORY:ALICIA_MAYBE_HURTED_SARAH_ASKED, TA_NULL, PARSE_JEAN_PUSHED_SARAH / MEMORY:ALICIA_MAYBE_HURTED_SARAH_ASKED, PARSE_JEAN_PUSHED_PLAYER_IN_FRONT_OF_SARAH
$ -> PARSE_JEAN_PUSHED_SARAH = MEMORY -> JEAN_PUSHED_SARAH ? SARAH_ANGRY_AGAINST_JEAN_CONDITIONNAL / SARAH_ANGRY_AGAINST_JEAN_FOR_ANOTHER_REASON_CONDITIONNAL
$ -> SARAH_ANGRY_AGAINST_JEAN_FOR_ANOTHER_REASON_CONDITIONNAL = MEMORY -> JEAN_PUSHED_PLAYER_IN_FRONT_OF_SARAH ? TALK:SARAH_ANGRY_AGAINST_JEAN / PARSE_SARAH_CANT_KNOW_CYAN_DOOR_IS_OPENED
$ -> PARSE_SARAH_CANT_KNOW_CYAN_DOOR_IS_OPENED = MEMORY -> SARAH_CANT_KNOW_CYAN_DOOR_IS_OPENED ? PARSE_SARAH_UNLOCKED_FIRST_CYAN_DOOR / PLAYER_AVOIDER_TYPE:STOP, SLOW:26-39
$ -> PARSE_SARAH_UNLOCKED_FIRST_CYAN_DOOR = MEMORY -> SARAH_UNLOCKED_FIRST_CYAN_DOOR ? PLAYER_AVOIDER_TYPE:STOP, SLOW:26-39 / MEMORY:SARAH_WILL_NOTICE_DOOR_IS_OPENED
$ -> SARAH_ANGRY_AGAINST_JEAN_CONDITIONNAL = PLAYER_CLOSER_THAN -> 7 ? TALK:SARAH_ANGRY_AGAINST_JEAN / MEMORY:SARAH_ANGRY_AGAINST_JEAN, PLAYER_AVOIDER_TYPE:AROUND, MOVE:26-39

PUSHED -> REBECCA = MEMORY -> JEAN_MAY_PUSH_PLAYER_IN_FRONT_OF_SARAH ? PARSE_STOPPING_JEAN_MAY_PUSH_PLAYER_IN_FRONT_OF_SARAH / CHECK_SARAH_SEEING_JEAN_PUSHING_REBECCA
$ -> PARSE_STOPPING_JEAN_MAY_PUSH_PLAYER_IN_FRONT_OF_SARAH = MEMORY -> STOPPING_JEAN_MAY_PUSH_PLAYER_IN_FRONT_OF_SARAH ? CHECK_SARAH_SEEING_JEAN_PUSHING_REBECCA / MEMORY:JEAN_PUSHED_PLAYER_IN_FRONT_OF_SARAH
$ -> CHECK_SARAH_SEEING_JEAN_PUSHING_REBECCA = SEE -> JEAN ? CHECK_SARAH_SEEING_JEAN_PUSHING_REBECCA_SECOND_VERIFICATION / NULL
$ -> CHECK_SARAH_SEEING_JEAN_PUSHING_REBECCA_SECOND_VERIFICATION = PLAYER_CLOSER_THAN -> 6 ? MEMORY:JEAN_PUSHED_PLAYER_IN_FRONT_OF_SARAH, MOVE:STOP, FACING:JEAN, WAITFOR_NULL / NULL
TALKED -> SARAH_ANGRY_AGAINST_JEAN = GOTO -> PLAYER_AVOIDER_TYPE:AROUND, MOVE:26-39, MEMORY:SARAH_ANGRY_AGAINST_JEAN
GOAL -> 26-39 = GOTO -> MEMORY:SARAH_REACHED_CORRIDOR, PARSE_SARAH_ANGRY_AGAINST_JEAN, TA_NULL
$ -> PARSE_SARAH_ANGRY_AGAINST_JEAN = MEMORY -> SARAH_ANGRY_AGAINST_JEAN ? MOVE:20-39 / SLOW:16-35


//// SCOLDING JEAN ////

GOAL -> 20-39 = MOVE -> 16-30
GOAL -> 16-30 = MOVE -> 19-25
GOAL -> 19-25 = GOTO -> MEMORY:SARAH_IS_WAITING_FOR_JEAN_TO_FINISH_FOR_SCOLDING_HIM, FACING:UP
! -> JEAN_EXITED_TOILET = MEMORY -> SARAH_IS_WAITING_FOR_JEAN_TO_FINISH_FOR_SCOLDING_HIM ? SCOLDING_JEAN / LOOP_SARAH_TRYING_TO_GO_TO_TOILET
$ -> LOOP_SARAH_TRYING_TO_GO_TO_TOILET = WAITFOR -> TIMER:1 ? AFFECTING:SARAH*JEAN_EXITED_TOILET
$ -> SCOLDING_JEAN = GOTO -> WAITFOR_NULL, SCOLDING_CUTSCENE_CONDITIONNAL
$ -> SCOLDING_CUTSCENE_CONDITIONNAL = SEE -> PLAYER ? SCOLDING_CUTSCENE / SCOLDING_FROM_FAR
$ -> SCOLDING_FROM_FAR = TALK -> SARAH_JEAN_SCOLDING_FROM_FAR
$ -> SCOLDING_CUTSCENE = GOTO -> CUTSCENE:START, WAITFOR_SCOLDING_CUTSCENE
$ -> WAITFOR_SCOLDING_CUTSCENE = WAITFOR -> TIMER:1 ? BATHROOM_PARSE_JEAN_PUSHED_PLAYER_IN_FRONT_OF_SARAH
$ -> BATHROOM_PARSE_JEAN_PUSHED_PLAYER_IN_FRONT_OF_SARAH = MEMORY -> JEAN_PUSHED_PLAYER_IN_FRONT_OF_SARAH ? TALK:SARAH_JEAN_SCOLDING / TALK:SARAH_JEAN_SCOLDING_VAR
TALKED -> SARAH_JEAN_SCOLDING = GOTO -> CUTSCENE:STOP
TALKED -> SARAH_JEAN_SCOLDING_VAR = GOTO -> CUTSCENE:STOP
TALKED -> SARAH_JEAN_SCOLDING_FROM_FAR = GOTO -> NULL


//// INQUIRY LEFT AREA ////