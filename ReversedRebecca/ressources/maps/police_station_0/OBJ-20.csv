! -> INIT_MIAOUSS_COMPUTER_AND_CHAIR = GOTO -> HIGHLIGHT_INIT, TA_INIT


//// STATE ////

$ -> HIGHLIGHT_INIT = HIGHLIGHT -> 0, -1, 2, 2
$ -> TA_INIT = TRIPLE_ACTION -> CUSTOM(DO_RESEARCH)DO_RESEARCH
$ -> WAITFOR_NULL = WAITFOR -> NULL


//// DO RESEARCH ////

$ -> SIT = GOTO -> NAME:OBJ-20-COMPUTER, HIGHLIGHT_REFRESH:PROCESS, TP:10-44, 
$ -> DO_RESEARCH = GOTO -> SIT, AFFECTING:PLAYER*SAT_ON_MIAOUSS_COMPUTER, WAITFOR_TIMER_9, A1_STOP_RESEARCH
$ -> A1_STOP_RESEARCH = ACTION_ONE -> CUSTOM(STOP)STOP_RESEARCH
$ -> STOP_RESEARCH = GOTO -> NAME:OBJ-20, HIGHLIGHT_REFRESH:PROCESS, WAITFOR_NULL, TP:9-44, AFFECTING:PLAYER*LEAVE_MIAOUSS_COMPUTER, TA_INIT
! -> LEAVE_MIAOUSS_DESK = GOTO -> STOP_RESEARCH

$ -> WAITFOR_TIMER_9 = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_IN_9, WAITFOR_TIMER_8, SOUND:KEYBOARD
$ -> WAITFOR_TIMER_8 = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_IN_8, WAITFOR_TIMER_7
$ -> WAITFOR_TIMER_7 = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_IN_7, WAITFOR_TIMER_6
$ -> WAITFOR_TIMER_6 = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_IN_6, WAITFOR_TIMER_5, SOUND:KEYBOARD
$ -> WAITFOR_TIMER_5 = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_IN_5, WAITFOR_TIMER_4
$ -> WAITFOR_TIMER_4 = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_IN_4, WAITFOR_TIMER_3
$ -> WAITFOR_TIMER_3 = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_IN_3, WAITFOR_TIMER_2, SOUND:KEYBOARD
$ -> WAITFOR_TIMER_2 = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_IN_2, WAITFOR_TIMER_1
$ -> WAITFOR_TIMER_1 = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_IN_1, WAITFOR_TIMER_OBTAINED
$ -> WAITFOR_TIMER_OBTAINED = WAITFOR -> TIMER:1 ? BONUS_TEXT_RESULTS_OBTAINED, STOP_RESEARCH, AFFECTING:OBJ-18*PLANT_BAITING, ACTION_ONE:NULL

$ -> BONUS_TEXT_RESULTS_IN_9 = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_IN_9
$ -> BONUS_TEXT_RESULTS_IN_8 = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_IN_8
$ -> BONUS_TEXT_RESULTS_IN_7 = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_IN_7
$ -> BONUS_TEXT_RESULTS_IN_6 = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_IN_6
$ -> BONUS_TEXT_RESULTS_IN_5 = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_IN_5
$ -> BONUS_TEXT_RESULTS_IN_4 = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_IN_4
$ -> BONUS_TEXT_RESULTS_IN_3 = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_IN_3
$ -> BONUS_TEXT_RESULTS_IN_2 = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_IN_2
$ -> BONUS_TEXT_RESULTS_IN_1 = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_IN_1
$ -> BONUS_TEXT_RESULTS_OBTAINED = CREATE_BONUSTEXT -> ONTHESPOT,NORMAL,RESULTS_OBTAINED


//// SPEEDRUN PATH ////

! -> PLAYER_REACHED_NEAR_BAIT = GOTO -> NAME:OBJ-20-VENT, HIGHLIGHT_REFRESH:PROCESS, ACTION_ONE:CUSTOM(MOVE_UNDER_VENTILATION)MOVE_UNDER_VENTILATION
$ -> MOVE_UNDER_VENTILATION = GOTO -> CUTSCENE:START, WAITFOR_TAKING_CHAIR
$ -> WAITFOR_TAKING_CHAIR = WAITFOR -> TIMER:1 ? TP:11-44, DELETE_CHAIR, SOUND:JUMP, WAITFOR_MOVE_PLAYER_UNDER_VENT
$ -> DELETE_CHAIR = DELETE -> 9-43:WORLD,2
$ -> WAITFOR_MOVE_PLAYER_UNDER_VENT = WAITFOR -> TIMER:1 ? AFFECTING:PLAYER*MOVE_UNDER_MIAOUSS_VENT
! -> PLAYER_REACHED_UNDER_MIAOUSS_VENT = GOTO -> CREATE_CHAIR_UNDER_VENT, SOUND:JUMP, CUTSCENE:STOP, A1_SEND_UP
$ -> CREATE_CHAIR_UNDER_VENT = CREATE_DECORATION -> 11-43-FRONT:WORLD,1,2,CHAIR,3-11,1-2
$ -> A1_SEND_UP = ACTION_ONE -> CUSTOM(GOUP)SEND_PLAYER_UP
$ -> SEND_PLAYER_UP = GOTO -> A1_SEND_UP, SEND_PLAYER:UP, AFFECTING:PLAYER*TP_MIAOUSS_VENT, SOUND:VENT