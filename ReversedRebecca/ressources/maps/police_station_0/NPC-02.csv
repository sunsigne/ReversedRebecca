TIME -> 0 = GOTO -> NAME:POLICEMAN, PLAYER_AVOIDER_TYPE:STOP, WAITFOR_STUN:FALSE, SIT


//// STATE ////

$ -> SIT = GOTO -> FACING:RIGHT, CONDITION:SIT, DISPLAY_SIT
$ -> DISPLAY_NORMAL = DISPLAY -> 0, 0
$ -> DISPLAY_SIT = DISPLAY -> -1, -3


//// INTRUSION ////

WONPUZZLE -> 13-44 = GOTO -> EXPRESSION:EXCLAMATION, WAITFOR_LEAVING_CHAIR
$ -> WAITFOR_LEAVING_CHAIR = WAITFOR -> TIMER:1 ? TP:9-43, DISPLAY_NORMAL, CONDITION:GOOD, LEAVE_CHAIR_CONDITIONNAL
$ -> LEAVE_CHAIR_CONDITIONNAL = SEE -> PLAYER ? PLAYER_SPOTTED / SLOW:13-44, WAITFOR_REACH_DOOR
$ -> WAITFOR_REACH_DOOR = WAITFOR -> PLAYER_CLOSER_THAN:5 ? PLAYER_SEEN_WHILE_GOING_DOOR_SECOND_VERIFICATION
$ -> PLAYER_SEEN_WHILE_GOING_DOOR_SECOND_VERIFICATION = SEE -> PLAYER ? PLAYER_SPOTTED / WAITFOR_REACH_DOOR
GOAL -> 13-44 = SEE -> PLAYER ? PLAYER_SPOTTED / SLOW:14-44
GOAL -> 14-44 = SEE -> PLAYER ? PLAYER_SPOTTED / WAITFOR_BEFORE_SUSPENSION_IN_FRONT_OF_DESK
$ -> WAITFOR_BEFORE_SUSPENSION_IN_FRONT_OF_DESK = WAITFOR -> TIMER:1 ? WAITFOR_HEADING_JAMES_DESK_CONDITIONNAL
$ -> WAITFOR_HEADING_JAMES_DESK_CONDITIONNAL = SEE -> PLAYER ? PLAYER_SPOTTED / EXPRESSION:SUSPENSION, WAITFOR_HEADING_JAMES_DESK
$ -> WAITFOR_HEADING_JAMES_DESK = WAITFOR -> TIMER:1 ? CHECK_FOR_PLAYER_BEFORE_HEADING_JAMES_DESK
$ -> CHECK_FOR_PLAYER_BEFORE_HEADING_JAMES_DESK = SEE -> PLAYER ? PLAYER_SPOTTED / WAITFOR_HEADING_JAMES_DESK_NEXT
$ -> WAITFOR_HEADING_JAMES_DESK_NEXT = WAITFOR -> TIMER:1 ? CHECK_FOR_PLAYER_BEFORE_HEADING_JAMES_DESK_NEXT
$ -> CHECK_FOR_PLAYER_BEFORE_HEADING_JAMES_DESK_NEXT = SEE -> PLAYER ? PLAYER_SPOTTED / SLOW:16-41, WAITFOR_REACH_JAMES_DESK
$ -> WAITFOR_REACH_JAMES_DESK = WAITFOR -> PLAYER_CLOSER_THAN:5 ? PLAYER_SEEN_WHILE_GOING_JAMES_DESK_SECOND_VERIFICATION
$ -> PLAYER_SEEN_WHILE_GOING_JAMES_DESK_SECOND_VERIFICATION = SEE -> PLAYER ? PLAYER_SPOTTED_ / WAITFOR_REACH_JAMES_DESK
GOAL -> 16-41 = GOTO -> stuff


//// SPOTTED WITHING ////

$ -> PLAYER_SPOTTED = AFFECTING -> OBJ-18*DETECTION_PLAYER_WITHIN_OR_OUTSIDE_MIAOUSS_DESK


//// SPOTTED WITHING DESK ////



! -> PLAYER_SPOTTED_WITHING_MIAOUSS_DESK = GOTO -> MOVE:STOP, CUTSCENE:START, TALK:POLICEMAN*PLAYER_SPOTTED_MIAOUSS_WITHIN_DESK
SELFTALKING -> POLICEMAN*PLAYER_SPOTTED_MIAOUSS_WITHIN_DESK = CHOICE -> PLAYER : (LEAVE)LEAVE_MIAOUSS_DESK, (STAY)STAY_IN_MIAOUSS_DESK
! -> PLAYER_LEFT_MIAOUSS_DESK = SLOW -> 12-44
GOAL -> 12-44 = GOTO -> MOVE:STOP, FACING:RIGHT, MOVE_PLAYER_OUT_OF_DOOR_CONDITIONNAL, WAITFOR_LOCKING_DOOR
$ -> MOVE_PLAYER_OUT_OF_DOOR_CONDITIONNAL = PLAYER_CLOSER_THAN -> 2 ? AFFECTING:PLAYER*LEAVE_MIAOUSS_DESK / NULL
$ -> WAITFOR_LOCKING_DOOR = WAITFOR -> TIMER:1 ? LOCK_DOOR_HANDLER, CUTSCENE:STOP, SLOW:9-43
$ -> LOCK_DOOR_HANDLER = GOTO -> DELETE_DOOR, LOCK_DOOR, LOCK_DOOR_ANIMATION, SOUND:DOOR_UNLOCK
$ -> DELETE_DOOR = DELETE -> 13-44:WORLD,1
$ -> LOCK_DOOR = CREATE -> 13-44-FRONT:1-255-1
$ -> LOCK_DOOR_ANIMATION = CREATE -> 13-44-FRONT:1-128-2
GOAL -> 9-43 = GOTO -> MOVE:STOP, SIT, TP:9-44, SOUND_IF_CAMERA:JUMP
! -> STAY_IN_MIAOUSS_DESK = GOTO -> stuff


//// SPOTTED OUTSIDE DESK ////

! -> PLAYER_SPOTTED_OUTSIDE_MIAOUSS_DESK = GOTO -> MOVE:STOP, TALK:POLICEMAN*PLAYER_SPOTTED_MIAOUSS_IN_CORRIDOR
TALKED -> POLICEMAN*PLAYER_SPOTTED_MIAOUSS_IN_CORRIDOR = GOTO -> CUTSCENE:START, SLOW:12-44