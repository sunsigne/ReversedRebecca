TIME -> 0 = GOTO -> TA_INIT


//// STATE ////

$ -> TA_INIT = TRIPLE_ACTION -> PEE*TAKE_PEE


//// TAKE SHIT ////

$ -> TAKE_PEE = GOTO -> CUTSCENE:START, MEMORY:PEEPEE, PLAYER_DROP_GLASS, PLAYER_GOING_ON_SEAT, WAITING_BEFORE_DOING_STUFF
$ -> PLAYER_GOING_ON_SEAT = GOTO -> CREATE_ONTHESPOT:254-0-247, BLOCKING_PATH:FALSE, FACING_PLAYER:UP, CONDITION_PLAYER:SIT, AFFECTING:DISPLAY_PLAYER_ON_TOILET, AFFECTING:TP_PLAYER_ON_TOILET, SOUND:JUMP
$ -> WAITING_BEFORE_DOING_STUFF = WAITFOR -> TIMER:1 ? SOUND:TOILET_DOING, WAITING_BEFORE_FINISHED
$ -> WAITING_BEFORE_FINISHED = WAITFOR -> TIMER:3 ? PLAYER_EXIT_SEAT, AFFECTING:MOVE_PLAYER_TO_SINK
$ -> PLAYER_EXIT_SEAT = GOTO -> CONDITION_PLAYER:GOOD, AFFECTING:TP_PLAYER_OUTSIDE_TOILET, AFFECTING:DISPLAY_PLAYER_DEFAULT, BLOCKING_PATH:TRUE, DELETE_ONTHESPOT:1, SOUND:TOILET_FLUSH


//// DROP GLASS ////

$ -> PLAYER_DROP_GLASS = CONDITION_PLAYER -> GLASS ? CREATE_GLASS_HANDLER / NULL
$ -> CREATE_GLASS_HANDLER = GOTO -> CREATE_GLASS, MEMORY:GLASS_ON_SINK,  SOUND:GLASS_TAKE
$ -> CREATE_GLASS = CREATE_DECORATION -> 17-7:1,1,GLASS_01


//// WASH HAND ////

! -> PLAYER_REACHED_SINK = GOTO -> SOUND:WATER_SINK, WAITING_BEFORE_CLEANED
$ -> WAITING_BEFORE_CLEANED = WAITFOR -> TIMER:2 ? PLAYER_TAKE_GLASS, FACING_PLAYER:DOWN, CUTSCENE:STOP


//// TAKE GLASS ////

$ -> PLAYER_TAKE_GLASS = MEMORY -> GLASS_ON_SINK ? DELETE_GLASS_HANDLER / NULL
$ -> DELETE_GLASS_HANDLER = GOTO -> DELETE_GLASS, SOUND:GLASS_TAKE, CONDITION_PLAYER:GLASS
$ -> DELETE_GLASS = DELETE -> 17-7:1