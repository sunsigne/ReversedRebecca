TIME -> 0 = GOTO -> TA_INIT


//// STATE ////

$ -> TA_INIT = TRIPLE_ACTION -> PEE*TAKE_PEE


//// TAKE SHIT ////

$ -> TAKE_PEE = GOTO -> MEMORY:PEEPEE, PLAYER_DROP_GLASS, PLAYER_GOING_ON_SEAT, WAITING_BEFORE_DOING_STUFF
$ -> PLAYER_GOING_ON_SEAT = GOTO -> BLOCKING_PATH:FALSE, FACING_PLAYER:UP, CONDITION_PLAYER:TOILET, AFFECTING:TP_PLAYER_ON_TOILET, SOUND:JUMP
$ -> WAITING_BEFORE_DOING_STUFF = WAITFOR -> TIMER:1 ? SOUND:TOILET_DOING, WAITING_BEFORE_FINISHED
$ -> WAITING_BEFORE_FINISHED = WAITFOR -> TIMER:3 ? PLAYER_EXIT_SEAT, PLAYER_TAKE_GLASS
$ -> PLAYER_EXIT_SEAT = GOTO -> BLOCKING_PATH:TRUE, FACING_PLAYER:DOWN, CONDITION_PLAYER:GOOD, AFFECTING:TP_PLAYER_OUTSIDE_TOILET, SOUND:TOILET_FLUSH


//// DROP GLASS ////

$ -> PLAYER_DROP_GLASS = CONDITION_PLAYER -> GLASS ? CREATE_GLASS_HANDLER / NULL
$ -> CREATE_GLASS_HANDLER = GOTO -> CREATE_GLASS, MEMORY:GLASS_ON_GROUND
$ -> CREATE_GLASS = CREATE -> 17-8:251-0-254


//// TAKE GLASS ////

$ -> PLAYER_TAKE_GLASS = MEMORY -> GLASS_ON_GROUND ? DELETE_GLASS_HANDLER / NULL
$ -> DELETE_GLASS_HANDLER = GOTO -> DELETE_GLASS, CONDITION_PLAYER:GLASS
$ -> DELETE_GLASS = DELETE -> 17-8:1