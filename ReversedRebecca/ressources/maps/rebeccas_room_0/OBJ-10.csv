TIME -> 0 = GOTO -> HITBOX_INIT, CREATE_HALF


//// STATE ////

$ -> HITBOX_INIT = HITBOX -> 6, 0, 10, 16
$ -> CREATE_HALF = CREATE_DECORATION -> ONTHESPOT:1,1,CLOTHES_BASKET_HALF


//// FULL BASKET //// 

! -> BASKET_FULL = GOTO -> DISPLAY_FULL, TA_LAUNDRY
$ -> DISPLAY_FULL = GOTO -> DELETE_ONTHESPOT:1, CREATE_FULL
$ -> TA_LAUNDRY = TRIPLE_ACTION -> DO_LAUNDRY_SHORT*DO_LAUNDRY
$ -> CREATE_FULL = CREATE_DECORATION -> ONTHESPOT:1,1,CLOTHES_BASKET_FULL


//// EMPTY BASKET //// 

! -> BASKET_EMPTY = GOTO -> ACTION_ONE:NULL, SOUND:CLOTHES, DELETE_ONTHESPOT:1, CREATE_EMPTY
$ -> CREATE_EMPTY = CREATE_DECORATION -> ONTHESPOT:1,1,CLOTHES_BASKET_EMPTY


//// DO LAUNDRY //// 

$ -> DO_LAUNDRY = GOTO -> CUTSCENE:START, PLAYER_DROP_GLASS, AFFECTING:TP_PLAYER_TO_BASKET, AFFECTING:WAITING_BEFORE_TAKING_CLOTHES
! -> WAITING_BEFORE_TAKING_CLOTHES = WAITFOR -> TIMER:1 ? AFFECTING:BASKET_EMPTY, WAITING_BEFORE_GOTO_MACHINE
$ -> WAITING_BEFORE_GOTO_MACHINE = WAITFOR -> TIMER:1 ? AFFECTING:MOVE_PLAYER_TO_MACHINE
! -> PLAYER_REACHED_MACHINE = GOTO -> SOUND:CLOTHES, WAITING_BEFORE_TURNING_ON 
$ -> WAITING_BEFORE_TURNING_ON  = WAITFOR -> TIMER:1 ? SOUND:WASHING_MACHINE, WAITING_BEFORE_TAKING_BACK_CLOTHES
$ -> WAITING_BEFORE_TAKING_BACK_CLOTHES = WAITFOR -> TIMER:4 ? SOUND:CLOTHES, WAITING_BEFORE_BRINGING_BACK_CLOTHES
$ -> WAITING_BEFORE_BRINGING_BACK_CLOTHES = WAITFOR -> TIMER:1 ? AFFECTING:MOVE_PLAYER_TO_DRESSER
! -> PLAYER_REACHED_DRESSER = GOTO -> SOUND:CLOTHES, CUTSCENE:STOP


//// DROP GLASS ////

$ -> PLAYER_DROP_GLASS = CONDITION_PLAYER -> GLASS ? CREATE_GLASS_HANDLER / NULL
$ -> CREATE_GLASS_HANDLER = GOTO -> AFFECTING:HAS_NO_WATER, AFFECTING:TA_SINK_TAKE_GLASS, CONDITION_PLAYER:GOOD, CREATE_GLASS, SAVE_GLASS_ON_SINK, SOUND:GLASS_TAKE
$ -> CREATE_GLASS = CREATE_DECORATION -> 3-7:1,1,GLASS_00
$ -> SAVE_GLASS_ON_SINK = SAVE -> REGISTER, REBECCAS_ROOM*GLASS_ON_SINK