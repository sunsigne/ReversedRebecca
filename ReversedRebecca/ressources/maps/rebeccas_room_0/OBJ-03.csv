TIME -> 0 = GOTO -> HITBOX_INIT, TA_INIT, SECURIZE_SECRET_PATH


//// STATE ////

$ -> HITBOX_INIT = HITBOX -> 0, 7, 15, 9
$ -> TA_INIT = TRIPLE_ACTION -> WATCH*WATCH_CANDLE, CANDLE_LIGHT*LIGHT_CANDLE
$ -> SECURIZE_SECRET_PATH = WAITFOR -> PLAYER_FUTHER_THAN:3 ? MEMORY:SEALED_SECRET_PATH

//// WATCH CANDLE ////

$ -> WATCH_CANDLE = GOTO -> TALK:CANDLE


//// LIGHT CANDLE ////

$ -> LIGHT_CANDLE = GOTO -> A2_EXTINGUISH_CANDLE, CREATE_FIRE, SAVE_CANDLE_ON, SOUND:LIGHTER, AFFECTING:UNLOCK_SECRET_PATH
$ -> A2_EXTINGUISH_CANDLE = ACTION -> 2,CANDLE_EXTINGUISH*EXTINGUISH_CANDLE
$ -> CREATE_FIRE = CREATE_ANIMATION -> ONTHESPOT-BACK:1,1,CANDLE,2,16,TRUE
$ -> SAVE_CANDLE_ON = SAVE -> REGISTER, REBECCAS_ROOM*CANDLE_ON


//// EXTINGUISH CANDLE ////

$ -> EXTINGUISH_CANDLE = GOTO -> A2_LIGHT_CANDLE, DELETE_FIRE, UNSAVE_CANDLE_ON, SOUND:LIGHTER, MEMORY:SEALED_SECRET_PATH
$ -> A2_LIGHT_CANDLE = ACTION -> 2,CANDLE_LIGHT*LIGHT_CANDLE
$ -> DELETE_FIRE = DELETE -> ONTHESPOT:1
$ -> UNSAVE_CANDLE_ON = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*CANDLE_ON