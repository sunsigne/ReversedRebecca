TIME -> 0 = GOTO -> HITBOX_INIT, TA_INIT


//// STATE ////

$ -> HITBOX_INIT = HITBOX -> 6, 0, 10, 16
$ -> TA_INIT = GOTO -> TA_TAKE_WATER


//// TAKE WATER //// 

! -> HAS_NO_WATER = NAME -> GLASS ? TA_SINK_TAKE_GLASS / TA_TAKE_WATER
$ -> TA_TAKE_WATER = TRIPLE_ACTION -> WATER_TAKE*TAKE_WATER
$ -> TAKE_WATER = GOTO -> AFFECTING:HAS_WATER, CONDITION_PLAYER:GLASS, SOUND:WATER_TAKE


//// EMPTY WATER //// 

! -> HAS_WATER = GOTO -> TA_EMPTY_WATER
$ -> TA_EMPTY_WATER = TRIPLE_ACTION -> WATER_EMPTY*EMPTY_WATER
$ -> EMPTY_WATER = GOTO -> AFFECTING:HAS_NO_WATER, CONDITION_PLAYER:GOOD, SOUND:WATER_EMPTY


//// DISABLE SINK ////

! -> DISABLE_SINK = GOTO -> DISABLE_ONTHESPOT:1, WAITING_TO_ENABLE
$ -> WAITING_TO_ENABLE = WAITFOR -> PLAYER_FACING:!RIGHT ? ENABLE_ONTHESPOT:1


//// TAKE GLASS ////

! -> GLASS_ON_SINK = GOTO -> NAME:GLASS, TA_SINK_TAKE_GLASS
$ -> TA_SINK_TAKE_GLASS = TRIPLE_ACTION -> TAKE*TAKE_GLASS
$ -> TAKE_GLASS = GOTO -> NAME:SINK, AFFECTING:HAS_WATER, DELETE_GLASS, CONDITION_PLAYER:GLASS, UNSAVE_GLASS_ON_SINK, SOUND:GLASS
$ -> DELETE_GLASS = DELETE -> 3-7:1
$ -> UNSAVE_GLASS_ON_SINK = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*GLASS_ON_SINK