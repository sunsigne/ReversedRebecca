TIME -> 0 = GOTO -> AFFECTING:RIGHT_CHAIR_INIT


//// STATE ////

! -> RIGHT_CHAIR_INIT = GOTO -> HITBOX_INIT, TA_INIT, CREATE_CHAIR
$ -> HITBOX_INIT = HITBOX -> 6, 3, 10, 13
$ -> TA_INIT = TRIPLE_ACTION -> SIT*SIT
$ -> CREATE_CHAIR = CREATE_DECORATION -> 7-2-FRONT:WORLD,1,2,CHAIR_RIGHT_00


//// SIT ////

$ -> SIT = GOTO -> BLOCKING_PATH:FALSE, DELETE_CHAIR, CREATE_CHAIR_SIT, PLAYER_DROP_EATABLE, PLAYER_SITTING
$ -> DELETE_CHAIR = DELETE -> 7-2:WORLD,2
$ -> CREATE_CHAIR_SIT = CREATE_DECORATION -> 7-2-BACK:WORLD,1,2,CHAIR_RIGHT_01
$ -> PLAYER_SITTING = STATE_PLAYER -> 7-3,2,-1,RIGHT,SIT, SOUND:JUMP
$ -> CREATE_CHAIR_LEAVER_HANDLER = GOTO -> CREATE_CHAIR_LEAVER, AFFECTING:CHAIR_LEAVER_RIGHT_INIT
$ -> CREATE_CHAIR_LEAVER = CREATE -> 8-3-BACK:31-255-255


//// DROP EATABLE ////

$ -> PLAYER_DROP_EATABLE = CONDITION_PLAYER -> GLASS ? DRINK_CUTSCENE / EAT_BREAKFAST
$ -> DRINK_CUTSCENE = GOTO -> CUTSCENE:START, SOUND:GLASS, CREATE_GLASS, WAITING_BEFORE_DRINK
$ -> WAITING_BEFORE_DRINK = WAITFOR -> TIMER:1 ? DRINK_WATER, EAT_BREAKFAST
$ -> DRINK_WATER = GOTO -> AFFECTING:HAS_NO_WATER, SOUND:DRINK_JUICE, DELETE_GLASS
$ -> CREATE_GLASS = CREATE_DECORATION -> 8-3-BACK:WORLD,1,1,GLASS_07
$ -> DELETE_GLASS = DELETE -> 8-3:WORLD,1


//// EAT PANCAKES ////

$ -> EAT_BREAKFAST = MEMORY -> PANCAKES ? EAT_PANCAKES_CONDITIONAL / FINISHED_BREAKFAST
$ -> EAT_PANCAKES_CONDITIONAL = MEMORY -> PANCAKES_SMELL_ONLY ? FINISHED_BREAKFAST / PARSE_SARAH_LEFT_ANGRY
$ -> PARSE_SARAH_LEFT_ANGRY = MEMORY -> SARAH_LEFT_ANGRY ? START_EATING_ANGRY / PARSE_EATING_WITH_SARAH
$ -> PARSE_EATING_WITH_SARAH = MEMORY -> EATING_WITH_SARAH ? PARSE_FINISHED_EATING_WITH_SARAH / STARTING_BREAKFAST
$ -> PARSE_FINISHED_EATING_WITH_SARAH = MEMORY -> FINISHED_EATING_WITH_SARAH ? FINISHED_BREAKFAST / PARSE_POST_ARRIVAL_PANCAKES_TO_EAT
$ -> PARSE_POST_ARRIVAL_PANCAKES_TO_EAT = MEMORY -> POST_ARRIVAL_PANCAKES ? FINISHED_BREAKFAST / NULL
$ -> STARTING_BREAKFAST = GOTO -> CUTSCENE:START, MEMORY:PANCAKES_SMELL_ONLY, SAVE_ATE_BREAKFAST, PARSE_SARAH_ENTERED
$ -> PARSE_SARAH_ENTERED = MEMORY -> SARAH_ENTERED ? PARSE_BAD_FRIEND / WAITING_BEFORE_TALKING
$ -> PARSE_BAD_FRIEND = MEMORY -> BAD_FRIEND ? TALK:REBECCA_GREEDY_ABOUT_PANCAKES / START_EATING
$ -> WAITING_BEFORE_TALKING = WAITFOR -> TIMER:1 ? PARSE_COLD_PANCAKES 
$ -> PARSE_COLD_PANCAKES  = MEMORY -> COLD_PANCAKES ? TALK:REBECCA_COLD_PANCAKES / TALK:REBECCA_HAPPY_ABOUT_PANCAKES
TALKED -> REBECCA_GREEDY_ABOUT_PANCAKES = GOTO -> START_EATING
TALKED -> REBECCA_HAPPY_ABOUT_PANCAKES = GOTO -> START_EATING
TALKED -> REBECCA_COLD_PANCAKES = GOTO -> START_EATING
$ -> START_EATING = GOTO -> CUTSCENE:START, MEMORY:PANCAKES_SMELL_ONLY, WAITING_BEFORE_EATING
$ -> WAITING_BEFORE_EATING = WAITFOR -> TIMER:1 ? SOUND:EAT, REFRESH_PANCAKES, WAITING_BEFORE_EATING_MORE
$ -> WAITING_BEFORE_EATING_MORE = WAITFOR -> TIMER:3 ? SOUND:EAT, REFRESH_PANCAKES_MORE, WAITING_BEFORE_EATING_MORE_AGAIN
$ -> WAITING_BEFORE_EATING_MORE_AGAIN = WAITFOR -> TIMER:3 ? SOUND:EAT, DELETE_PANCAKES, WAITING_BEFORE_FINISHED
$ -> WAITING_BEFORE_FINISHED = WAITFOR -> TIMER:2 ? FINISHED_BREAKFAST, UNSAVE_PANCAKES_ON_TABLE, UNSAVE_LEFT_PANCAKES_ON_TABLE, TALK_ABOUT_EATING_PLATE
$ -> FINISHED_BREAKFAST = GOTO -> CUTSCENE:STOP, CREATE_CHAIR_LEAVER_HANDLER
$ -> UNSAVE_PANCAKES_ON_TABLE = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*PANCAKES_ON_TABLE
$ -> UNSAVE_LEFT_PANCAKES_ON_TABLE = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*LEFT_PANCAKES_ON_TABLE
$ -> TALK_ABOUT_EATING_PLATE = MEMORY -> TALKED_ABOUT_EATING_PLATE ? NULL / MEMORY:TALKED_ABOUT_EATING_PLATE, TALK:REBECCA_FINISHED_EATING_PANCAKES
$ -> SAVE_ATE_BREAKFAST = SAVE -> REGISTER, REBECCA*ATE_BREAKFAST


//// REFRESH PANCAKES ////

$ -> REFRESH_PANCAKES = GOTO -> DELETE_PANCAKES, CREATE_PANCAKES 
$ -> CREATE_PANCAKES = CREATE_DECORATION -> 8-3-BACK:WORLD,1,1,PANCAKES_02
$ -> REFRESH_PANCAKES_MORE = GOTO -> DELETE_PANCAKES, CREATE_PANCAKES_MORE
$ -> CREATE_PANCAKES_MORE = CREATE_DECORATION -> 8-3-BACK:WORLD,1,1,PANCAKES_03
$ -> DELETE_PANCAKES = DELETE -> 8-3:WORLD,1

$ -> CREATE_PANCAKES_SARAH = CREATE_DECORATION -> 9-3-BACK:WORLD,1,1,PANCAKES_11
$ -> CREATE_PANCAKES_SARAH_MORE = CREATE_DECORATION -> 9-3-BACK:WORLD,1,1,PANCAKES_12
$ -> CREATE_PANCAKES_SARAH_LAST = CREATE_DECORATION -> 9-3-BACK:WORLD,1,1,PANCAKES_13
$ -> DELETE_SARAH_PANCAKES = DELETE -> 9-3:WORLD,1

//// MORE PANCAKES ////

$ -> PLAYER_DROP_DRINK = CONDITION_PLAYER -> GLASS ? MEMORY:MORE_PANCAKES_GLASS, SOUND:GLASS, CREATE_GLASS_ABOVE / NULL
$ -> DRINK_WATER_CONDITIONNAL = MEMORY -> MORE_PANCAKES_GLASS ? DRINK_WATER_ABOVE / NULL
$ -> CREATE_GLASS_ABOVE = CREATE_DECORATION -> 8-3-FRONT:WORLD,1,1,GLASS_07
$ -> DRINK_WATER_ABOVE = GOTO -> AFFECTING:HAS_NO_WATER, SOUND:DRINK_JUICE, DELETE_GLASS_ABOVE
$ -> DELETE_GLASS_ABOVE = DELETE -> 8-3:WORLD,2

! -> PANCAKES_SPLITAGE = GOTO -> REFRESH_PANCAKES, CREATE_PANCAKES_SARAH_MORE, SOUND:PLATE, MEMORY:EATING_WITH_SARAH
! -> PLAYER_SITTING_TO_PANCAKES = GOTO -> BLOCKING_PATH:FALSE, DELETE_CHAIR, CREATE_CHAIR_SIT, PLAYER_DROP_DRINK, PLAYER_SITTING
! -> PANCAKES_REBECCA_SARAH_EATING = GOTO -> DELETE_SARAH_PANCAKES, CREATE_PANCAKES_SARAH_LAST, WAITING_BEFORE_REBECCA_BITE, SOUND:EAT
$ -> WAITING_BEFORE_REBECCA_BITE = WAITFOR -> TIMER:1 ? REFRESH_PANCAKES_MORE, WAITING_BEFORE_SARAH_BITE_MORE, SOUND:EAT
$ -> WAITING_BEFORE_SARAH_BITE_MORE = WAITFOR -> TIMER:1 ? DELETE_SARAH_PANCAKES, WAITING_BEFORE_REBECCA_BITE_MORE, SOUND:EAT
$ -> WAITING_BEFORE_REBECCA_BITE_MORE = WAITFOR -> TIMER:1 ? DELETE_PANCAKES, SOUND:EAT, WAITING_BEFORE_REBECCA_LAST_DRINK
$ -> WAITING_BEFORE_REBECCA_LAST_DRINK = WAITFOR -> TIMER:1 ? DRINK_WATER_CONDITIONNAL, WAITING_BEFORE_SHARE_FINISHED
$ -> WAITING_BEFORE_SHARE_FINISHED = WAITFOR -> TIMER:2 ? UNSAVE_PANCAKES_ON_TABLE, PARSE_POST_ARRIVAL_PANCAKES
$ -> PARSE_POST_ARRIVAL_PANCAKES = MEMORY -> POST_ARRIVAL_PANCAKES ? PARSE_SLEEP / TALK:SARAH_PANCAKES_EATING_SHARED_FINISHED
$ -> PARSE_SLEEP = MEMORY -> SARAH_SLEEP ? TALK:SARAH_PANCAKES_EATING_POST_ARRIVAL_FINISHED_AND_SLEEP / TALK:SARAH_PANCAKES_EATING_POST_ARRIVAL_FINISHED
TALKED -> SARAH_PANCAKES_EATING_SHARED_FINISHED = GOTO -> FINISHED_BREAKFAST, MEMORY:FINISHED_EATING_WITH_SARAH, MEMORY:PANCAKES_SMELL_ONLY
TALKED -> SARAH_PANCAKES_EATING_POST_ARRIVAL_FINISHED = GOTO -> FINISHED_BREAKFAST, MEMORY:FINISHED_EATING_WITH_SARAH, MEMORY:PANCAKES_SMELL_ONLY
TALKED -> SARAH_PANCAKES_EATING_POST_ARRIVAL_FINISHED_AND_SLEEP = GOTO -> FINISHED_BREAKFAST, MEMORY:FINISHED_EATING_WITH_SARAH, MEMORY:PANCAKES_SMELL_ONLY

! -> PANCAKES_CREATE_SARAH = GOTO -> CREATE_PANCAKES_SARAH, SOUND:PLATE
! -> PANCAKES_SARAH_EATING = GOTO -> DELETE_SARAH_PANCAKES, CREATE_PANCAKES_SARAH_MORE, WAITING_BEFORE_SARAH_ALONE_EATING, SOUND:EAT
$ -> WAITING_BEFORE_SARAH_ALONE_EATING = WAITFOR -> TIMER:2 ? DELETE_SARAH_PANCAKES, CREATE_PANCAKES_SARAH_LAST, WAITING_BEFORE_SARAH_ALONE_EATING_LAST, SOUND:EAT
$ -> WAITING_BEFORE_SARAH_ALONE_EATING_LAST = WAITFOR -> TIMER:2 ? DELETE_SARAH_PANCAKES, WAITING_BEFORE_SARAH_FINISHED, SOUND:EAT
$ -> WAITING_BEFORE_SARAH_FINISHED = WAITFOR -> TIMER:2 ? TALK:SARAH_PANCAKES_EATING_FINISHED
TALKED -> SARAH_PANCAKES_EATING_FINISHED = GOTO -> FINISHED_BREAKFAST, MEMORY:FINISHED_EATING_WITH_SARAH, MEMORY:PANCAKES_SMELL_ONLY

//// SARAH ANGRY ////

$ -> START_EATING_ANGRY = GOTO -> CUTSCENE:START, MEMORY:PANCAKES_SMELL_ONLY, SAVE_ATE_BREAKFAST, PARSE_SECOND_PLATE
$ -> PARSE_SECOND_PLATE = MEMORY -> SECOND_PLATE ? WAITING_BEFORE_EATING_MORE_ANGRY / MEMORY:SECOND_PLATE, WAITING_BEFORE_EATING_ANGRY
$ -> WAITING_BEFORE_EATING_ANGRY = WAITFOR -> TIMER:1 ? TALK:REBECCA_ANGRY_PANCAKES
TALKED -> REBECCA_ANGRY_PANCAKES = FACING_PLAYER -> RIGHT ? PARSE_SHARED_PANCAKES / NULL
$ -> PARSE_SHARED_PANCAKES = MEMORY -> SHARED_PANCAKES ? WAITING_BEFORE_EATING_MORE_ANGRY / WAITING_BEFORE_EATING
$ -> WAITING_BEFORE_EATING_MORE_ANGRY = WAITFOR -> TIMER:1 ? SOUND:EAT, REFRESH_PANCAKES_MORE, WAITING_BEFORE_EATING_MORE_AGAIN