TIME -> 0 = GOTO -> HITBOX_INIT, CREATE_HALF


//// STATE ////

$ -> HITBOX_INIT = HITBOX -> 6, 0, 10, 16
$ -> CREATE_HALF = CREATE_DECORATION -> ONTHESPOT-BACK:WORLD,1,1,CLOTHES_BASKET_HALF
$ -> A1_NULL = ACTION_ONE -> NULL


//// FULL BASKET //// 

! -> BASKET_FULL = GOTO -> DISPLAY_FULL, NAME:OBJ-10-FULL, HIGHLIGHT_REFRESH:PROCESS, A1_LAUNDRY
$ -> DISPLAY_FULL = GOTO -> DELETE_ONTHESPOT:1, CREATE_FULL
$ -> A1_LAUNDRY = ACTION_ONE -> CUTSOM(DO_LAUNDRY_SHORT)DO_LAUNDRY
$ -> CREATE_FULL = CREATE_DECORATION -> ONTHESPOT-BACK:WORLD,1,1,CLOTHES_BASKET_FULL


//// EMPTY BASKET //// 

! -> BASKET_EMPTY = GOTO -> A1_NULL, SOUND:CLOTHES, NAME:OBJ-10, HIGHLIGHT_REFRESH:PROCESS, DELETE_ONTHESPOT:1, CREATE_EMPTY
$ -> CREATE_EMPTY = CREATE_DECORATION -> ONTHESPOT-BACK:WORLD,1,1,CLOTHES_BASKET_EMPTY


//// DO LAUNDRY //// 

$ -> DO_LAUNDRY = GOTO -> CUTSCENE:START, PLAYER_DROP_GLASS, AFFECTING:OBJECT*WAITING_BEFORE_TAKING_CLOTHES
! -> WAITING_BEFORE_TAKING_CLOTHES = WAITFOR -> TIMER:1 ? AFFECTING:BASKET_EMPTY, WAITING_BEFORE_GOTO_MACHINE
$ -> WAITING_BEFORE_GOTO_MACHINE = WAITFOR -> TIMER:1 ? AFFECTING:PLAYER*MOVE_PLAYER_TO_MACHINE
! -> PLAYER_REACHED_MACHINE = GOTO -> SOUND:CLOTHES, WAITING_BEFORE_TURNING_ON 
$ -> WAITING_BEFORE_TURNING_ON  = WAITFOR -> TIMER:1 ? SOUND:WASHING_MACHINE, WAITING_BEFORE_TAKING_BACK_CLOTHES
$ -> WAITING_BEFORE_TAKING_BACK_CLOTHES = WAITFOR -> TIMER:4 ? SOUND:CLOTHES, WAITING_BEFORE_BRINGING_BACK_CLOTHES
$ -> WAITING_BEFORE_BRINGING_BACK_CLOTHES = WAITFOR -> TIMER:1 ? AFFECTING:PLAYER*MOVE_PLAYER_TO_DRESSER
! -> PLAYER_REACHED_DRESSER = GOTO -> SOUND:CLOTHES, CUTSCENE:STOP


//// DROP GLASS ////

$ -> PLAYER_DROP_GLASS = CONDITION_PLAYER -> GLASS ? CREATE_GLASS_HANDLER / NULL
$ -> CREATE_GLASS_HANDLER = GOTO -> AFFECTING:HAS_NO_WATER, AFFECTING:GLASS_ON_SINK, CONDITION_PLAYER:GOOD, CREATE_GLASS, SAVE_GLASS_ON_SINK, SOUND:GLASS
$ -> CREATE_GLASS = CREATE_DECORATION -> 3-8-BACK:WORLD,1,1,GLASS_00
$ -> SAVE_GLASS_ON_SINK = SAVE -> REGISTER, REBECCAS_ROOM*GLASS_ON_SINK


//// SEARCHING KEY ////

! -> KNOWING_KEY_POS = ACTION -> 3,NULL
! -> SEARCHING_KEY = ACTION -> 3,TALK(SEARCH_KEY)KEY_SEARCH*CLOTHES_BASKET
TALKED -> KEY_SEARCH*CLOTHES_BASKET = MEMORY -> KEY_SECOND_ATTEMPT ? TALK:KEY_FOUND*COUCH / FIRST_ATTEMPT_CONDITIONNAL, TALK:KEY_FAIL*CLOTHES_BASKET
$ -> FIRST_ATTEMPT_CONDITIONNAL = MEMORY -> KEY_FIRST_ATTEMPT ? MEMORY:KEY_SECOND_ATTEMPT / MEMORY:KEY_FIRST_ATTEMPT