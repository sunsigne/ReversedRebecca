TIME -> 0 = GOTO -> HITBOX_INIT, HIGHLIGHT_INIT, TA_INIT


//// STATE ////

$ -> HITBOX_INIT = HITBOX -> 6, 0, 10, 16
$ -> HIGHLIGHT_INIT = HIGHLIGHT_ABSOLUTE -> 3, 8, 1, 2
$ -> HIGHLIGHT_GLASS = HIGHLIGHT_ABSOLUTE -> 3, 8, 1, 1
$ -> TA_INIT = GOTO -> TA_TAKE_WATER


//// TAKE WATER //// 

! -> HAS_NO_WATER = GOTO -> HAS_NO_WATER
$ -> HAS_NO_WATER = NAME -> GLASS ? TA_SINK_TAKE_GLASS / TA_TAKE_WATER
$ -> TA_TAKE_WATER = TRIPLE_ACTION -> WATER_TAKE*TAKE_WATER
$ -> TAKE_WATER = GOTO -> CONDITION_PLAYER:GLASS, SOUND:WATER_TAKE, SPAM_AFFECTING:HAS_WATER, TA_EMPTY_WATER


//// EMPTY WATER //// 

! -> HAS_WATER = GOTO -> TA_EMPTY_WATER
$ -> TA_EMPTY_WATER = TRIPLE_ACTION -> WATER_EMPTY*EMPTY_WATER
$ -> EMPTY_WATER = GOTO -> CONDITION_PLAYER:GOOD, SOUND:WATER_EMPTY, SPAM_AFFECTING:HAS_NO_WATER, HAS_NO_WATER


//// DISABLE SINK ////

! -> DISABLE_SINK = GOTO -> DISABLE_ONTHESPOT:1, WAITING_TO_ENABLE
$ -> WAITING_TO_ENABLE = WAITFOR -> PLAYER_FACING:!RIGHT ? ENABLE_ONTHESPOT:1


//// TAKE GLASS ////

! -> GLASS_ON_SINK = GOTO -> HIGHLIGHT_GLASS, NAME:OBJ-06-GLASS, HIGHLIGHT_REFRESH:PROCESS, TA_SINK_TAKE_GLASS
$ -> TA_SINK_TAKE_GLASS = TRIPLE_ACTION -> TAKE*TAKE_GLASS
$ -> TAKE_GLASS = GOTO -> DELETE_GLASS, HIGHLIGHT_INIT, NAME:OBJ-06, HIGHLIGHT_REFRESH:PROCESS, CONDITION_PLAYER:GLASS, UNSAVE_GLASS_ON_SINK, SOUND:GLASS, AFFECTING:HAS_WATER, TA_EMPTY_WATER
$ -> DELETE_GLASS = DELETE -> 3-8:WORLD,1
$ -> UNSAVE_GLASS_ON_SINK = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*GLASS_ON_SINK