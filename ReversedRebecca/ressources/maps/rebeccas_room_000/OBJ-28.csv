TIME -> 0 = GOTO -> AFFECTING:OBJECT*DOWN_CHAIR_INIT


//// STATE ////

! -> DOWN_CHAIR_INIT = GOTO -> HIGHLIGHT_INIT, TA_INIT
$ -> HIGHLIGHT_INIT = HIGHLIGHT -> 0, -1, 1, 2
$ -> TA_INIT = TRIPLE_ACTION -> SIT*SIT


//// SIT ////

$ -> SIT = GOTO -> BLOCKING_PATH:FALSE, PLAYER_DROP_EATABLE, PLAYER_SITTING
$ -> PLAYER_SITTING = STATE_PLAYER -> 9-2,0,-1,DOWN,SIT, SOUND:JUMP
$ -> CREATE_CHAIR_LEAVER_HANDLER = GOTO -> CREATE_CHAIR_LEAVER, AFFECTING:OBJ-31*CHAIR_LEAVER_DOWN_INIT
$ -> CREATE_CHAIR_LEAVER = CREATE -> 9-3-BACK:31-255-255


//// DROP EATABLE ////

$ -> PLAYER_DROP_EATABLE = CONDITION_PLAYER -> GLASS ? DRINK_CUTSCENE / EAT_BREAKFAST
$ -> DRINK_CUTSCENE = GOTO -> CUTSCENE:START, SOUND:GLASS, CREATE_GLASS, WAITING_BEFORE_DRINK
$ -> WAITING_BEFORE_DRINK = WAITFOR -> TIMER:1 ? DRINK_WATER, EAT_BREAKFAST
$ -> DRINK_WATER = GOTO -> AFFECTING:HAS_NO_WATER, SOUND:DRINK_JUICE, DELETE_GLASS
$ -> CREATE_GLASS = CREATE_DECORATION -> 9-3-BACK:WORLD,1,1,GLASS_05
$ -> DELETE_GLASS = DELETE -> 9-3:WORLD,1


//// SARAH SIT ////

! -> BLOCKING_PATH_CHAIR_TOWARD_DOWN_FALSE = BLOCKING_PATH -> FALSE
! -> BLOCKING_PATH_CHAIR_TOWARD_DOWN_TRUE = BLOCKING_PATH -> TRUE
! -> SARAH_INTERACTION = MEMORY -> SAT ? ACTION_ONE:NULL / NULL


//// SARAH ANGRY ////

$ -> EAT_BREAKFAST = MEMORY -> PANCAKES ? EAT_PANCAKES_CONDITIONAL / FINISHED_BREAKFAST
$ -> EAT_PANCAKES_CONDITIONAL = MEMORY -> TOP_PANCAKES_SMELL_ONLY ? FINISHED_BREAKFAST / PARSE_SARAH_LEFT_ANGRY
$ -> PARSE_SARAH_LEFT_ANGRY = MEMORY -> SARAH_LEFT_ANGRY ? START_EATING_ANGRY / FINISHED_BREAKFAST

$ -> START_EATING_ANGRY = GOTO -> CUTSCENE:START, MEMORY:TOP_PANCAKES_SMELL_ONLY, SAVE_ATE_BREAKFAST, PARSE_SECOND_PLATE
$ -> PARSE_SECOND_PLATE = MEMORY -> SECOND_PLATE ? WAITING_BEFORE_EATING / MEMORY:SECOND_PLATE, WAITING_BEFORE_EATING_ANGRY
$ -> WAITING_BEFORE_EATING_ANGRY = WAITFOR -> TIMER:1 ? TALK:REBECCA_ANGRY_PANCAKES
TALKED -> REBECCA_ANGRY_PANCAKES = FACING_PLAYER -> DOWN ? WAITING_BEFORE_EATING / NULL 
$ -> SAVE_ATE_BREAKFAST = SAVE -> REGISTER, REBECCA*ATE_BREAKFAST    

$ -> WAITING_BEFORE_EATING = WAITFOR -> TIMER:1 ? SOUND:EAT, REFRESH_PANCAKES_MORE, WAITING_BEFORE_EATING_MORE
$ -> WAITING_BEFORE_EATING_MORE = WAITFOR -> TIMER:3 ? SOUND:EAT, DELETE_PANCAKES, WAITING_BEFORE_FINISHED
$ -> WAITING_BEFORE_FINISHED = WAITFOR -> TIMER:2 ? FINISHED_BREAKFAST, UNSAVE_UP_PANCAKES_ON_TABLE, TALK_ABOUT_EATING_PLATE
$ -> FINISHED_BREAKFAST = GOTO -> CUTSCENE:STOP, CREATE_CHAIR_LEAVER_HANDLER
$ -> UNSAVE_UP_PANCAKES_ON_TABLE = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*UP_PANCAKES_ON_TABLE
$ -> TALK_ABOUT_EATING_PLATE = MEMORY -> TALKED_ABOUT_EATING_PLATE ? NULL / MEMORY:TALKED_ABOUT_EATING_PLATE, TALK:REBECCA_FINISHED_EATING_PANCAKES
$ -> REFRESH_PANCAKES_MORE = GOTO -> DELETE_PANCAKES, CREATE_PANCAKES_MORE
$ -> CREATE_PANCAKES_MORE = CREATE_DECORATION -> 9-3-BACK:WORLD,1,1,PANCAKES_13
$ -> DELETE_PANCAKES = DELETE -> 9-3:WORLD,1