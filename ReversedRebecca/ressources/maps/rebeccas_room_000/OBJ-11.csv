TIME -> 0 = GOTO -> HITBOX_INIT, HIGHLIGHT_INIT, SAVE_BASKET_HALF_FULL


//// STATE ////

$ -> HITBOX_INIT = HITBOX -> 0, 0, 16, 13
$ -> HIGHLIGHT_INIT = HIGHLIGHT -> 0, -1, 1, 2
$ -> SAVE_BASKET_HALF_FULL = SAVE -> REGISTER, REBECCAS_ROOM*BASKET_HALF_FULL
$ -> UNSAVE_ALL = GOTO -> UNSAVE_BASKET_EMPY, UNSAVE_BASKET_HALF_FULL, UNSAVE_BASKET_FULL
$ -> UNSAVE_BASKET_EMPY = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*BASKET_EMPTY
$ -> UNSAVE_BASKET_HALF_FULL = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*BASKET_HALF_FULL
$ -> UNSAVE_BASKET_FULL = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*BASKET_FULL


//// EMPTY BASKET //// 

! -> BASKET_EMPTY = GOTO -> ACTION_ONE:NULL, UNSAVE_ALL, SAVE_BASKET_EMPY
$ -> SAVE_BASKET_EMPY = SAVE -> REGISTER, REBECCAS_ROOM*BASKET_EMPY


//// DO LAUNDRY ////

! -> BASKET_FULL = GOTO -> ACTION_ONE:CUSTOM(DO_LAUNDRY)DO_LAUNDRY, UNSAVE_ALL, SAVE_BASKET_FULL
$ -> DO_LAUNDRY = GOTO -> CUTSCENE:START, PLAYER_DROP_GLASS, AFFECTING:PLAYER*MOVE_PLAYER_TO_BASKET
! -> PLAYER_REACHED_BASKET = GOTO -> AFFECTING:WAITING_BEFORE_TAKING_CLOTHES
$ -> SAVE_BASKET_FULL = SAVE -> REGISTER, REBECCAS_ROOM*BASKET_FULL


//// DROP GLASS ////

$ -> PLAYER_DROP_GLASS = CONDITION_PLAYER -> GLASS ? CREATE_GLASS_HANDLER / NULL
$ -> CREATE_GLASS_HANDLER = GOTO -> AFFECTING:HAS_NO_WATER, AFFECTING:GLASS_ON_SINK, CONDITION_PLAYER:GOOD, CREATE_GLASS, SAVE_GLASS_ON_SINK, SOUND:GLASS
$ -> CREATE_GLASS = CREATE_DECORATION -> 3-8-BACK:WORLD,1,1,GLASS,7-12,1-1
$ -> SAVE_GLASS_ON_SINK = SAVE -> REGISTER, REBECCAS_ROOM*GLASS_ON_SINK


//// SEARCHING KEY ////

! -> KNOWING_KEY_POS = ACTION -> 3,NULL
! -> SEARCHING_KEY = ACTION -> 3,CUSTOM(SEARCH_KEY)TALK_KEY_SEARCH_CONDITIONNAL
$ -> TALK_KEY_SEARCH_CONDITIONNAL = MEMORY -> KEY_SECOND_ATTEMPT ? TALK:KEY_FOUND*WASHING_MACHINE / FIRST_ATTEMPT_CONDITIONNAL, TALK:KEY_FAIL*WASHING_MACHINE
$ -> FIRST_ATTEMPT_CONDITIONNAL = MEMORY -> KEY_FIRST_ATTEMPT ? MEMORY:KEY_SECOND_ATTEMPT / MEMORY:KEY_FIRST_ATTEMPT