! -> ENTRANCE_WATER_INIT = GOTO -> NAME:OBJ-47-WATER-NONE, HIGHLIGHT_ABOVE_PLAYER:FALSE, BLOCKING_PATH:FALSE


//// STATE ////

! -> ADD_ENTRANCE_WATER = CONDITION_PLAYER -> GLASS ? ADD_ENTRANCE_WATER / NULL
$ -> ADD_ENTRANCE_WATER = GOTO -> AFFECTING:HAS_NO_WATER, CONDITION_PLAYER:GOOD, SOUND:GLASS, PARSE_WATER_NONE, ACTION_ONE:CUSTOM(TAKE)TAKE_WATER, MEMORY:WATER_AT_ENTRANCE
$ -> A1_TAKE_CONDITIONNAL_GLASS = CONDITION_PLAYER -> GLASS ? ACTION_ONE:NULL / A1_TAKE_CONDITIONNAL_NONE
$ -> A1_TAKE_CONDITIONNAL_NONE = NAME -> OBJ-47-WATER-NONE ? ACTION_ONE:NULL / ACTION_ONE:CUSTOM(TAKE)TAKE_WATER
$ -> TAKE_WATER = GOTO -> DELETE_A_GLASS, AFFECTING:HAS_WATER, CONDITION_PLAYER:GLASS, SOUND:GLASS, PARSE_REMOVE_WATER_MAX
$ -> DELETE_A_GLASS = DELETE -> ONTHESPOT:GROUND,1

! -> HAS_WATER = ACTION_ONE -> NULL
! -> HAS_NO_WATER = GOTO -> A1_TAKE_CONDITIONNAL_NONE
$ -> PARSE_REMOVE_WATER_MAX = NAME -> OBJ-47-WATER-THREE ? NAME:OBJ-47-WATER-TWO, HIGHLIGHT_REFRESH:PROCESS, UNSAVE_ENTRANCE_WATER_THREE, A1_TAKE_CONDITIONNAL_GLASS / PARSE_REMOVE_WATER_TWO


//// WATER ////

$ -> PARSE_WATER_NONE = NAME -> OBJ-47-WATER-NONE ? ADD_WATER_ONE / PARSE_WATER_ONE
$ -> ADD_WATER_ONE = GOTO -> NAME:OBJ-47-WATER-ONE, HIGHLIGHT_REFRESH:PROCESS, SAVE_ENTRANCE_WATER_ONE, CREATE_ENTRANCE_WATER_ONE
$ -> SAVE_ENTRANCE_WATER_ONE = SAVE -> REGISTER, REBECCAS_ROOM*ENTRANCE_WATER_ONE
$ -> UNSAVE_ENTRANCE_WATER_ONE = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*ENTRANCE_WATER_ONE
$ -> CREATE_ENTRANCE_WATER_ONE = CREATE_DECORATION -> ONTHESPOT-FRONT:GROUND,1,1,GLASS_08
$ -> PARSE_REMOVE_WATER_ONE = NAME -> OBJ-47-WATER-ONE ? NAME:OBJ-47-WATER-NONE, HIGHLIGHT_REFRESH:PROCESS, UNSAVE_ENTRANCE_WATER_ONE, ACTION_ONE:NULL, MEMORY:NO_WATER_AT_ENTRANCE / ACTION_ONE:NULL

$ -> PARSE_WATER_ONE = NAME -> OBJ-47-WATER-ONE ? ADD_WATER_TWO / PARSE_WATER_TWO
$ -> ADD_WATER_TWO = GOTO -> NAME:OBJ-47-WATER-TWO, HIGHLIGHT_REFRESH:PROCESS, SAVE_ENTRANCE_WATER_TWO, CREATE_ENTRANCE_WATER_TWO
$ -> SAVE_ENTRANCE_WATER_TWO = SAVE -> REGISTER, REBECCAS_ROOM*ENTRANCE_WATER_TWO
$ -> UNSAVE_ENTRANCE_WATER_TWO = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*ENTRANCE_WATER_TWO
$ -> CREATE_ENTRANCE_WATER_TWO = CREATE_DECORATION -> ONTHESPOT-FRONT:GROUND,1,1,GLASS_09
$ -> PARSE_REMOVE_WATER_TWO = NAME -> OBJ-47-WATER-TWO ? NAME:OBJ-47-WATER-ONE, HIGHLIGHT_REFRESH:PROCESS, UNSAVE_ENTRANCE_WATER_TWO, A1_TAKE_CONDITIONNAL_GLASS / PARSE_REMOVE_WATER_ONE

$ -> PARSE_WATER_TWO = NAME -> OBJ-47-WATER-TWO ? ADD_WATER_THREE / NULL
$ -> ADD_WATER_THREE = GOTO -> NAME:OBJ-47-WATER-THREE, HIGHLIGHT_REFRESH:PROCESS, SAVE_ENTRANCE_WATER_THREE, CREATE_ENTRANCE_WATER_THREE
$ -> SAVE_ENTRANCE_WATER_THREE = SAVE -> REGISTER, REBECCAS_ROOM*ENTRANCE_WATER_THREE
$ -> UNSAVE_ENTRANCE_WATER_THREE = SAVE -> CANCEL_REGISTER, REBECCAS_ROOM*ENTRANCE_WATER_THREE
$ -> CREATE_ENTRANCE_WATER_THREE = CREATE_DECORATION -> ONTHESPOT-FRONT:GROUND,1,1,GLASS_10