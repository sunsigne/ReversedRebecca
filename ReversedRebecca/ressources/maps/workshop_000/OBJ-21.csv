
//// KEY ////

! -> SIMULATION_CREATE_KEY = GOTO -> CREATE_KEY_GROUND, CREATE_KEY_WALLS, WAITFOR_CREATE_KEY
$ -> CREATE_KEY_GROUND = CREATE_SIMULATION -> ONTHESPOT:9,11,000,0
$ -> WAITFOR_CREATE_KEY = WAITFOR -> TIMER:1 ? CREATE_KEY
$ -> CREATE_KEY = CREATE -> 1-5-FRONT:1-1-255
$ -> CREATE_KEY_WALLS = GOTO -> CREATE_KEY_WALL_UP, CREATE_KEY_WALL_DOWN, AFFECTING:OBJ-23*INIT_KEY_WALL
$ -> CREATE_KEY_WALL_UP = CREATE -> 1-3-FRONT:23-255-255
$ -> CREATE_KEY_WALL_DOWN = CREATE -> 1-7-FRONT:23-255-255


//// KEY CHEST ////

PICKUPLOOT -> 1-5 = GOTO -> REMOVE_SIMULATION_KEY, SIMULATION_CREATE_CHEST
$ -> REMOVE_SIMULATION_KEY = GOTO -> DELETE_SIMULATION, DELETE_KEY_WALL_UP, DELETE_KEY_WALL_DOWN
$ -> DELETE_SIMULATION = DELETE -> ONTHESPOT:GROUND,1
$ -> DELETE_KEY_WALL_UP = DELETE -> 1-3:WORLD,1
$ -> DELETE_KEY_WALL_DOWN = DELETE -> 1-7:WORLD,1


//// CHEST ////

$ -> SIMULATION_CREATE_CHEST = GOTO -> CREATE_CHEST_GROUND, CREATE_CHEST_WALLS, WAITFOR_CREATE_CHEST
$ -> CREATE_CHEST_GROUND = CREATE_SIMULATION -> ONTHESPOT:9,11,000,1
$ -> WAITFOR_CREATE_CHEST = WAITFOR -> TIMER:1 ? CREATE_CHEST
$ -> CREATE_CHEST = CREATE -> 4-1-FRONT:1-128-255
$ -> CREATE_CHEST_WALLS = GOTO -> CREATE_SINGLE_WALL_CHEST, CREATE_CHEST_WALL_ONE, CREATE_CHEST_WALL_TWO, CREATE_CHEST_WALL_THREE, CREATE_CHEST_WALL_FOUR, CREATE_CHEST_WALL_FIVE, CREATE_CHEST_WALL_SIX, CREATE_CHEST_WALL_SEVEN, AFFECTING:OBJ-23*INIT_CHEST_WALL
$ -> CREATE_SINGLE_WALL_CHEST = CREATE -> 4-1-FRONT:255-255-255
$ -> CREATE_CHEST_WALL_ONE = CREATE -> 1-1-FRONT:23-255-255
$ -> CREATE_CHEST_WALL_TWO = CREATE -> 6-1-FRONT:23-255-255
$ -> CREATE_CHEST_WALL_THREE = CREATE -> 6-4-FRONT:23-255-255
$ -> CREATE_CHEST_WALL_FOUR = CREATE -> 1-7-FRONT:23-255-255
$ -> CREATE_CHEST_WALL_FIVE = CREATE -> 3-7-FRONT:23-255-255
$ -> CREATE_CHEST_WALL_SIX = CREATE -> 5-7-FRONT:23-255-255
$ -> CREATE_CHEST_WALL_SEVEN = CREATE -> 7-7-FRONT:23-255-255


//// CHEST DOOR ////

WONPUZZLE -> 4-1 = GOTO -> REMOVE_SIMULATION_CHEST, CREATE_DOOR_WALL, SIMULATION_CREATE_PUZZLE
$ -> REMOVE_SIMULATION_CHEST = GOTO -> DELETE_SIMULATION, DELETE_CHEST_WALL_THREE, DELETE_CHEST
$ -> DELETE_CHEST_WALL_THREE = DELETE -> 6-4:WORLD,1
$ -> DELETE_CHEST = DELETE -> 4-1:WORLD,1
$ -> CREATE_DOOR_WALL = CREATE -> 4-3-FRONT:255-255-255
UNLOCKEDTOOLMAXLEVEL -> KEY:GREEN = MEMORY -> UNLOCKED_GREEN_KEY


//// PUZZLE ////

$ -> SIMULATION_CREATE_PUZZLE = GOTO -> CREATE_PUZZLE_GROUND, CREATE_PUZZLE_WALLS, WAITFOR_CREATE_PUZZLE
$ -> CREATE_PUZZLE_GROUND = CREATE_SIMULATION -> ONTHESPOT:9,11,000,2
$ -> WAITFOR_CREATE_PUZZLE = WAITFOR -> TIMER:1 ? DELETE_DOOR_WALL, CREATE_CYAN_DOOR, CREATE_GREEN_KEY_CONDITIONNAL, CREATE_GREEN_DOOR_CONDITIONNAL
$ -> DELETE_DOOR_WALL = DELETE -> 4-3:WORLD,1
$ -> CREATE_CYAN_DOOR = CREATE -> 4-3-FRONT:1-245-1
$ -> CREATE_GREEN_KEY_CONDITIONNAL = MEMORY -> UNLOCKED_GREEN_KEY ? CREATE_GREEN_KEY / NULL
$ -> CREATE_GREEN_KEY = CREATE -> 4-5-FRONT:1-2-255
$ -> CREATE_GREEN_DOOR_CONDITIONNAL = MEMORY -> UNLOCKED_GREEN_KEY ? CREATE_GREEN_DOOR / CREATE_CYAN_DOOR_SECOND
$ -> CREATE_GREEN_DOOR = CREATE -> 6-5-FRONT:1-245-2
$ -> CREATE_CYAN_DOOR_SECOND = CREATE -> 6-5-FRONT:1-245-1
$ -> CREATE_PUZZLE_WALLS = GOTO -> CREATE_WALL_EIGHT, AFFECTING:OBJ-23*INIT_CHEST_WALL, CREATE_SINGLE_WALL_ONE, CREATE_SINGLE_WALL_TWO, CREATE_SINGLE_WALL_THREE, CREATE_SINGLE_WALL_FOUR
$ -> CREATE_WALL_EIGHT = CREATE -> 1-4-FRONT:23-255-255
$ -> CREATE_SINGLE_WALL_ONE = CREATE -> 3-3-FRONT:255-255-255
$ -> CREATE_SINGLE_WALL_TWO = CREATE -> 5-3-FRONT:255-255-255
$ -> CREATE_SINGLE_WALL_THREE = CREATE -> 6-4-FRONT:255-255-255
$ -> CREATE_SINGLE_WALL_FOUR = CREATE -> 6-6-FRONT:255-255-255


//// PUZZLE NULL ////

WONPUZZLE -> 6-5 = GOTO -> REMOVE_SIMULATION_PUZZLE, CREATE_NULL_GROUND
$ -> REMOVE_SIMULATION_PUZZLE = GOTO -> DELETE_SIMULATION, DA, DB, DC, DD, DE, DF, DG, DH, DI, DJ, DK, DL, DM, DN
$ -> DA = DELETE -> 1-1:WORLD,1
$ -> DB = DELETE -> 4-1:WORLD,1
$ -> DC = DELETE -> 6-1:WORLD,1
$ -> DD = DELETE -> 3-3:WORLD,1
$ -> DE = DELETE -> 4-3:WORLD,1
$ -> DF = DELETE -> 5-3:WORLD,1
$ -> DG = DELETE -> 1-4:WORLD,1
$ -> DH = DELETE -> 6-4:WORLD,1
$ -> DI = DELETE -> 6-5:WORLD,1
$ -> DJ = DELETE -> 6-6:WORLD,1
$ -> DK = DELETE -> 1-7:WORLD,1
$ -> DL = DELETE -> 3-7:WORLD,1
$ -> DM = DELETE -> 5-7:WORLD,1
$ -> DN = DELETE -> 7-7:WORLD,1
$ -> CREATE_NULL_GROUND = CREATE_SIMULATION -> ONTHESPOT:9,11,000,3